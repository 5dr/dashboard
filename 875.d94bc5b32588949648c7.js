"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[875],{690:(C,p,e)=>{e.d(p,{v:()=>Z});var d=e(7716),s=e(2290),b=e(69),u=e(8583);let Z=(()=>{class m{constructor(r,l,t){this.toaster=r,this.translateService=l,this.datePipe=t}dateMapping(r,l){return this.datePipe.transform(r,l)}handleSuccessMessage(r,l){this.toaster.success(r,l)}handleErrorMessage(r){this.toaster.error(r,this.translateService.instant("general.error"))}}return m.\u0275fac=function(r){return new(r||m)(d.LFG(s._W),d.LFG(b.sK),d.LFG(u.uU))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6875:(C,p,e)=>{e.r(p),e.d(p,{BookingManagementModule:()=>U});var d=e(8583),s=e(3679),b=e(4284),u=e(3423),Z=e(6738),m=e(5319),f=e(5435),r=e(4395),l=e(8966),t=e(7716),A=e(7093),T=e(7423),k=e(5245),v=e(69);let _=(()=>{class a{constructor(o){this.data=o}ngOnInit(){}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(l.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view-details"]],decls:98,vars:65,consts:[[1,"popup-container"],["mat-dialog-title","",1,"d-flex","align-items-center","head"],["fxFlex",""],["mat-icon-button","","matDialogClose","",1,"mat-close-modal"],[1,"content-wrapper"],[1,"info-wrapper"],[1,"info-section"],[1,"head"],[1,"data"],[1,"info-section","location"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"h5"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"span",2),t.TgZ(7,"button",3),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-dialog-content",4),t.TgZ(11,"div",5),t.TgZ(12,"div",6),t.TgZ(13,"p",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"p",8),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"div",6),t.TgZ(19,"p",7),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"p",8),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"div",6),t.TgZ(25,"p",7),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"p",8),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"div",6),t.TgZ(31,"p",7),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"p",8),t._uU(35),t.qZA(),t.qZA(),t.TgZ(36,"div",6),t.TgZ(37,"p",7),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"p",8),t._uU(41),t.ALo(42,"date"),t.qZA(),t.qZA(),t.TgZ(43,"div",6),t.TgZ(44,"p",7),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"p",8),t._uU(48),t.ALo(49,"date"),t.qZA(),t.qZA(),t.TgZ(50,"div",6),t.TgZ(51,"p",7),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"p",8),t._uU(55),t.qZA(),t.qZA(),t.TgZ(56,"div",6),t.TgZ(57,"p",7),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"p",8),t._uU(61),t.qZA(),t.qZA(),t.TgZ(62,"div",6),t.TgZ(63,"p",7),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"p",8),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"div",6),t.TgZ(69,"p",7),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"p",8),t._uU(73),t.qZA(),t.qZA(),t.TgZ(74,"div",9),t.TgZ(75,"p",7),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"p",8),t._uU(79),t.qZA(),t.qZA(),t.TgZ(80,"div",6),t.TgZ(81,"p",7),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"p",8),t._uU(85),t.qZA(),t.qZA(),t.TgZ(86,"div",6),t.TgZ(87,"p",7),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"p",8),t._uU(91),t.qZA(),t.qZA(),t.TgZ(92,"div",6),t.TgZ(93,"p",7),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"p",8),t._uU(97),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,29,"bookingManagement.viewDetails")),t.xp6(10),t.Oqu(t.lcZ(15,31,"bookingManagement.travellerName")),t.xp6(3),t.Oqu((null==n.data.bookingItemData.traveller?null:n.data.bookingItemData.traveller.first_name)+" "+(null==n.data.bookingItemData.traveller?null:n.data.bookingItemData.traveller.last_name)),t.xp6(3),t.Oqu(t.lcZ(21,33,"bookingManagement.hostName")),t.xp6(3),t.Oqu((null==n.data.bookingItemData||null==n.data.bookingItemData.host?null:n.data.bookingItemData.host.first_name)+" "+(null==n.data.bookingItemData||null==n.data.bookingItemData.host?null:n.data.bookingItemData.host.last_name)),t.xp6(3),t.Oqu(t.lcZ(27,35,"bookingManagement.propertyName")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.property_name),t.xp6(3),t.Oqu(t.lcZ(33,37,"bookingManagement.propertyType")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.property_type),t.xp6(3),t.Oqu(t.lcZ(39,39,"bookingManagement.bookedFrom")),t.xp6(3),t.Oqu(t.xi3(42,41,null==n.data.bookingItemData?null:n.data.bookingItemData.booked_from,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(46,44,"bookingManagement.bookedTo")),t.xp6(3),t.Oqu(t.xi3(49,46,null==n.data.bookingItemData?null:n.data.bookingItemData.booked_to,"yyyy-MM-dd")),t.xp6(4),t.Oqu(t.lcZ(53,49,"bookingManagement.noOfGuests")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.no_of_guests),t.xp6(3),t.Oqu(t.lcZ(59,51,"bookingManagement.noOfBedrooms")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.no_of_bedrooms),t.xp6(3),t.Oqu(t.lcZ(65,53,"bookingManagement.noOfBathrooms")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.no_of_bathrooms),t.xp6(3),t.Oqu(t.lcZ(71,55,"bookingManagement.noOfNights")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.no_of_nights),t.xp6(3),t.Oqu(t.lcZ(77,57,"bookingManagement.location")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.location),t.xp6(3),t.Oqu(t.lcZ(83,59,"bookingManagement.basePrice")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.base_price),t.xp6(3),t.Oqu(t.lcZ(89,61,"bookingManagement.discountTotal")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.discount_total),t.xp6(3),t.Oqu(t.lcZ(95,63,"bookingManagement.priceTotal")),t.xp6(3),t.Oqu(null==n.data.bookingItemData?null:n.data.bookingItemData.price_total))},directives:[l.uh,A.yH,T.lW,l.ZT,k.Hw,l.xY],pipes:[v.X$,d.uU],styles:[".head[_ngcontent-%COMP%]{justify-content:center!important}.head[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:0}.mat-close-modal[_ngcontent-%COMP%]{line-height:1em!important}.content-wrapper[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:5px}.content-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{margin-top:1em}.content-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{width:50%;display:inline-block;text-align:start;margin-bottom:1em;vertical-align:top}@media (max-width: 576px){.content-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{width:100%;display:block}}.content-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{margin-bottom:.5em;color:var(--main-txt-color)}.content-wrapper[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{color:var(--grey-color)}.content-wrapper[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{width:100%!important;display:block!important;margin-bottom:2em!important}.confirmation-btns[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em}.confirmation-btns[_ngcontent-%COMP%]   .approve-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color)}"]}),a})();var P=e(7973),y=e(690),h=e(7322),O=e(3157),M=e(386),D=e(8833),q=e(1655);function x(a,g){if(1&a&&(t.TgZ(0,"mtx-option",19),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a){const o=g.$implicit;t.Q6J("value",null==o?null:o.id),t.xp6(1),t.Oqu(t.lcZ(2,2,"bookingManagement."+(null==o?null:o.name)))}}const w=function(){return[5,10,50,100]},S=[{path:"",component:(()=>{class a{constructor(o,n,i,c){this.translateService=o,this.dialog=n,this.commonService=i,this.bookingManagementService=c,this.bookingCriteria={page:0,pageSize:10,date:"",status:"",search:""},this.bookingStatus=[{id:1,name:"booked"},{id:2,name:"paymentPending"},{id:3,name:"checkedIn"},{id:4,name:"checkedOut"},{id:5,name:"successFull"},{id:6,name:"cancelled"},{id:7,name:"notBooked"}],this.bookingData=[],this.columns=[{header:this.translateService.instant("bookingManagement.propertyName"),field:"property_name"},{header:this.translateService.instant("bookingManagement.propertyType"),field:"property_type"},{header:this.translateService.instant("bookingManagement.noOfBedrooms"),field:"no_of_bedrooms"},{header:this.translateService.instant("bookingManagement.noOfBathrooms"),field:"no_of_bathrooms"},{header:this.translateService.instant("bookingManagement.bookedFrom"),field:"booked_from",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("bookingManagement.bookedTo"),field:"booked_to",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("bookingManagement.status"),field:"status",type:"boolean",typeParameter:{display:"boolean"},class:"status"},{header:this.translateService.instant("bookingManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"info",type:"icon",icon:"visibility",tooltip:this.translateService.instant("bookingManagement.viewDetails"),click:B=>this.onViewDetails(B)}]}],this.loading=!1,this.bookingDate=new s.NI,this.bookingSearchQuery=new s.NI,this.subscriptions=new m.w}ngOnInit(){this.fetchBookingList(),this.initBookingSearch()}fetchBookingList(){this.loading=!0,this.subscriptions.add(this.bookingManagementService.fetchBookingList(this.bookingCriteria).subscribe(o=>{var n;this.loading=!1,(null==o?void 0:o.successful)&&(this.bookingData=null===(n=null==o?void 0:o.bookings)||void 0===n?void 0:n.data)},o=>{var n;this.loading=!1,this.commonService.handleErrorMessage(null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message)}))}initBookingSearch(){this.subscriptions.add(this.bookingSearchQuery.valueChanges.pipe((0,f.h)(o=>{var n;return(null===(n=null==o?void 0:o.trim())||void 0===n?void 0:n.length)>3||""===(null==o?void 0:o.trim())}),(0,r.b)(700)).subscribe(o=>{this.bookingCriteria.search=o,this.bookingCriteria.page=0,this.fetchBookingList()}))}onViewDetails(o){this.fetchBookingDetails(null==o?void 0:o.id)}fetchBookingDetails(o){this.subscriptions.add(this.bookingManagementService.fetchBookingDetails(o).subscribe(n=>{var i;this.openViewModal(null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.booking)}))}openViewModal(o){const i=this.dialog.open(_,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{bookingItemData:o}}).afterClosed().subscribe(c=>{i.unsubscribe()})}onFilterByDate(o){o?(this.bookingCriteria.date=Z(o.value).format("DD-MM-YYYY"),this.fetchBookingList()):(this.bookingCriteria.date="",this.fetchBookingList())}onFilterByStatus(o){o?(this.bookingCriteria.status=o,this.fetchBookingList()):(this.bookingCriteria.status="",this.fetchBookingList())}onPageChanged(o){console.log(null==o?void 0:o.pageIndex)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(v.sK),t.Y36(l.uw),t.Y36(y.v),t.Y36(P.q))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-booking-management"]],decls:27,vars:32,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","title-row","pb-4"],[1,"title"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"formControl","placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","change"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","never"],["matSuffix","",3,"for"],["type","date"],["datePicker",""],["matInput","",3,"mtxDatetimepicker","dateChange"],[1,"row","table-row"],[3,"data","columns","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","page"],[3,"value"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"mat-icon",6),t._uU(9,"search"),t.qZA(),t._UZ(10,"input",7),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"mat-form-field",9),t.TgZ(14,"mtx-select",10),t.NdJ("change",function(c){return n.onFilterByStatus(c)}),t.ALo(15,"translate"),t.YNc(16,x,3,4,"mtx-option",11),t.qZA(),t.qZA(),t.TgZ(17,"mat-form-field",12),t.TgZ(18,"mat-placeholder"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"mtx-datetimepicker-toggle",13),t._UZ(22,"mtx-datetimepicker",14,15),t.TgZ(24,"input",16),t.NdJ("dateChange",function(c){return n.onFilterByDate(c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",17),t.TgZ(26,"mtx-grid",18),t.NdJ("page",function(c){return n.onPageChanged(c)}),t.qZA(),t.qZA(),t.qZA()),2&o){const i=t.MAs(23);t.xp6(3),t.Oqu(t.lcZ(4,23,"menu.bookingManagement")),t.xp6(7),t.s9C("placeholder",t.lcZ(11,25,"bookingManagement.search")),t.Q6J("formControl",n.bookingSearchQuery),t.xp6(4),t.s9C("placeholder",t.lcZ(15,27,"bookingManagement.bookingStatus")),t.xp6(2),t.Q6J("ngForOf",n.bookingStatus),t.xp6(3),t.Oqu(t.lcZ(20,29,"bookingManagement.date")),t.xp6(2),t.Q6J("for",i),t.xp6(3),t.Q6J("mtxDatetimepicker",i),t.xp6(2),t.Q6J("data",n.bookingData)("columns",n.columns)("loading",n.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!0)("showPaginator",!0)("pageSizeOptions",t.DdM(31,w))("pageIndex",n.bookingCriteria.page)("pageSize",n.bookingCriteria.pageSize)}},directives:[k.Hw,h.qo,s.Fj,s.JJ,s.oH,h.KE,O.MS,d.sg,h.UY,M.C7,h.R9,M.VQ,D.Nt,M.WA,q.CM,O.Jd],pipes:[v.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #CDCDCD;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}  .mat-button.mat-success,   .mat-icon-button.mat-success,   .mat-stroked-button.mat-success{color:green}  .mat-button.mat-info,   .mat-icon-button.mat-info,   .mat-stroked-button.mat-info{color:#56aec3}"]}),a})()}];let I=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),a})(),U=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[],imports:[[d.ez,I,s.u5,s.UX,b.m8]]}),a})()}}]);