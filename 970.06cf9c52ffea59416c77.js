"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[970],{690:(P,u,o)=>{o.d(u,{v:()=>M});var h=o(2340),r=o(7716),v=o(2290),m=o(7460),C=o(8583),f=o(1841);let M=(()=>{class c{constructor(t,l,S,x){this.toaster=t,this.translateService=l,this.datePipe=S,this.http=x}dateMapping(t,l){return this.datePipe.transform(t,l)}handleSuccessMessage(t,l){this.toaster.success(t,l)}handleErrorMessage(t){this.toaster.error(t,this.translateService.instant("general.error"))}uploadImg(t){return this.http.post(`${h.N.endPointUrl}user/hosting/upload-images`,t)}}return c.\u0275fac=function(t){return new(t||c)(r.LFG(v._W),r.LFG(m.sK),r.LFG(C.uU),r.LFG(f.eN))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},5970:(P,u,o)=>{o.r(u),o.d(u,{CouponsManagementModule:()=>T});var h=o(8583),r=o(3679),v=o(4284),m=o(3423),C=o(690),f=o(5319),M=o(322),c=o(6691),g=o(1393),t=o(7716),l=o(7460),S=o(8966),x=o(7423),O=o(5245),b=o(7322),y=o(5870),Z=o(1576);const w=function(){return[5,10,50,100]},A=[{path:"",component:(()=>{class i{constructor(n,e,a,s){this.translateService=n,this.dialog=e,this.commonService=a,this.couponsManagementService=s,this.couponSearchQuery=new r.NI,this.couponCriteria={page:0,pageSize:5,search:0},this.couponStatus=[{id:1,name:"Active"},{id:2,name:"Not Active"}],this.couponsData=[],this.columns=[{header:this.translateService.instant("couponsManagement.id"),field:"id"},{header:this.translateService.instant("couponsManagement.code"),field:"code"},{header:this.translateService.instant("couponsManagement.percentage"),field:"percentage"},{header:this.translateService.instant("couponsManagement.description"),field:"description"},{header:this.translateService.instant("couponsManagement.startDate"),field:"start_date",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("couponsManagement.expiryDate"),field:"expiry_date",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("couponsManagement.status"),field:"status"},{header:this.translateService.instant("couponsManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"info",type:"icon",icon:"edit",tooltip:this.translateService.instant("couponsManagement.edit"),click:p=>this.onEditCoupon(p)},{color:"success",type:"icon",icon:"lock_open",tooltip:this.translateService.instant("couponsManagement.activate"),click:p=>this.onActivateCoupon(p)},{color:"warn",type:"icon",icon:"delete",tooltip:this.translateService.instant("couponsManagement.delete"),click:p=>this.onDeleteCoupon(p)}]}],this.loading=!1,this.subscriptions=new f.w}ngOnInit(){this.fetchCouponsList()}fetchCouponsList(){this.loading=!0,this.subscriptions.add(this.couponsManagementService.fetchCouponsList().subscribe(n=>{1==n.successful&&(this.loading=!1,this.couponsData=n.coupons.data)},n=>{var e;this.commonService.handleErrorMessage(null===(e=null==n?void 0:n.error)||void 0===e?void 0:e.message)}))}onAddCoupon(){const e=this.dialog.open(c.C,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{couponData:{},mode:"ADD"}}).afterClosed().subscribe(a=>{e.unsubscribe(),this.fetchCouponsList()})}tooltiStatus(n){let e;return e=this.translateService.instant("1"==n.status?"couponsManagement.deactivateConfirmation":"couponsManagement.activateConfirmation"),e}onEditCoupon(n){const a=this.dialog.open(c.C,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{couponData:n,mode:"EDIT"}}).afterClosed().subscribe(s=>{a.unsubscribe(),this.fetchCouponsList()})}onActivateCoupon(n){const e=this.dialog.open(g.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.tooltiStatus(n),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),a=e.componentInstance.confirmationEmitter.subscribe(s=>{s?this.activateCoupon(n,e):e.close(),a.unsubscribe()})}activateCoupon(n,e){this.subscriptions.add(this.couponsManagementService.activateCoupon(null==n?void 0:n.id).subscribe(a=>{e.close(),this.fetchCouponsList(),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.activateSuccess"),this.translateService.instant("general.success"))},a=>{var s;this.commonService.handleErrorMessage(null===(s=null==a?void 0:a.error)||void 0===s?void 0:s.message)}))}onDeleteCoupon(n){const e=this.dialog.open(g.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("couponsManagement.deleteConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),a=e.componentInstance.confirmationEmitter.subscribe(s=>{s?this.deleteCoupon(n,e):e.close(),a.unsubscribe()})}deleteCoupon(n,e){this.subscriptions.add(this.couponsManagementService.deleteCoupon(null==n?void 0:n.id).subscribe(a=>{e.close(),this.fetchCouponsList(),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.deleteSuccess"),this.translateService.instant("general.success"))},a=>{var s;this.commonService.handleErrorMessage(null===(s=null==a?void 0:a.error)||void 0===s?void 0:s.message)}))}onPageChanged(n){this.couponCriteria.page=null==n?void 0:n.pageIndex,this.couponCriteria.pageSize=null==n?void 0:n.pageSize,this.fetchCouponsList()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.sK),t.Y36(S.uw),t.Y36(C.v),t.Y36(M.Z))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-coupons-management"]],decls:23,vars:30,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","pb-4"],[1,"col-lg-6","col-md-6","col-sm-12","title-row"],[1,"title"],[1,"col-lg-6","col-md-6","col-sm-12","button-container"],["mat-raised-button","",1,"btn",3,"click"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"formControl","placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","items"],[1,"row","table-row"],[3,"data","columns","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","page"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.onAddCoupon()}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"div",8),t.TgZ(13,"mat-icon",9),t._uU(14,"search"),t.qZA(),t._UZ(15,"input",10),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"mat-form-field",12),t._UZ(19,"mtx-select",13),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",14),t.TgZ(22,"mtx-grid",15),t.NdJ("page",function(s){return e.onPageChanged(s)}),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,21,"menu.couponsManagement")),t.xp6(4),t.Oqu(t.lcZ(9,23,"couponsManagement.addCoupon")),t.xp6(7),t.s9C("placeholder",t.lcZ(16,25,"couponsManagement.search")),t.Q6J("formControl",e.couponSearchQuery),t.xp6(4),t.s9C("placeholder",t.lcZ(20,27,"couponsManagement.couponStatus")),t.Q6J("items",e.couponStatus),t.xp6(3),t.Q6J("data",e.couponsData)("columns",e.columns)("loading",e.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!0)("showPaginator",!0)("pageSizeOptions",t.DdM(29,w))("pageIndex",0)("pageSize",5))},directives:[x.lW,O.Hw,b.qo,r.Fj,r.JJ,r.oH,b.KE,y.MS,Z.CM],pipes:[l.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary);padding-inline-start:4px}.button-container[_ngcontent-%COMP%]{justify-content:end;text-align:end;padding-inline-end:5%}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--text-primary);color:var(--white-color)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #CDCDCD;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{justify-content:end;text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em;justify-content:start;text-align:start}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}  .mtx-grid .mat-table:not(.mat-column-resize-table) .mat-header-cell:not(.mtx-grid-checkbox-cell){min-width:110px!important;width:110px!important}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.Bz.forChild(A)],m.Bz]}),i})(),T=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[h.ez,E,r.u5,r.UX,v.m8]]}),i})()}}]);