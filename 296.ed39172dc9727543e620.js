"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[296],{690:(P,p,s)=>{s.d(p,{v:()=>U});var M=s(2340),c=s(7716),C=s(2290),v=s(7460),S=s(8583),m=s(1841);let U=(()=>{class d{constructor(l,u,f,b){this.toaster=l,this.translateService=u,this.datePipe=f,this.http=b}dateMapping(l,u){return this.datePipe.transform(l,u)}handleSuccessMessage(l,u){this.toaster.success(l,u)}handleErrorMessage(l){this.toaster.error(l,this.translateService.instant("general.error"))}uploadImg(l){return this.http.post(`${M.N.endPointUrl}user/hosting/upload-images`,l)}}return d.\u0275fac=function(l){return new(l||d)(c.LFG(C._W),c.LFG(v.sK),c.LFG(S.uU),c.LFG(m.eN))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},296:(P,p,s)=>{s.r(p),s.d(p,{UserManagementModule:()=>L});var M=s(8583),c=s(3679),C=s(4284),v=s(3423),S=s(690),m=s(1393),U=s(5319),d=s(2340),e=s(7716),l=s(1841);let u=(()=>{class a{constructor(t){this.http=t}fetchUsersList(t){return this.http.get(`${d.N.endPointUrl}admin/users`,{params:t})}toggleUserStatus(t){return this.http.put(`${d.N.endPointUrl}admin/toggle-status/${t}`,{})}deleteUser(t){return this.http.delete(`${d.N.endPointUrl}admin/delete-user/${t}`)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(l.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var f=s(7460),b=s(8966),x=s(5245),O=s(7322),_=s(5870),w=s(1576);function T(a,r){if(1&a&&e._uU(0),2&a){const t=r.$implicit;e.AsE(" ",t.first_name," ",null==t?null:t.last_name," ")}}function A(a,r){if(1&a&&e._uU(0),2&a){const t=r.$implicit;e.hij(" ",null!=t&&t.is_active?"Active":"Not Active"," ")}}const Z=function(){return[5,10,50,100]},E=function(a,r){return{first_name:a,is_active:r}},B=[{path:"",component:(()=>{class a{constructor(t,n,o,i,h){this.translateService=t,this.dialog=n,this.commonService=o,this.userManagementService=i,this.cdr=h,this.usersCriteria={page:0,pageSize:5,is_active:""},this.userStatus=[{id:1,name:"Active"},{id:0,name:"Not Active"}],this.usersData=[],this.columns=[{header:this.translateService.instant("userManagement.id"),field:"id"},{header:this.translateService.instant("userManagement.userName"),field:"first_name"},{header:this.translateService.instant("userManagement.email"),field:"email"},{header:this.translateService.instant("userManagement.userPhone"),field:"phone_number"},{header:this.translateService.instant("userManagement.permissionsCount"),field:"permissions_count"},{header:this.translateService.instant("userManagement.status"),field:"is_active"},{header:this.translateService.instant("userManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"warn",type:"icon",icon:"lock",tooltip:this.translateService.instant("userManagement.block"),iif:g=>!0===Boolean(g.is_active),click:g=>this.onBlockUser(g)},{color:"success",type:"icon",icon:"lock_open",tooltip:this.translateService.instant("userManagement.unblock"),iif:g=>!1===Boolean(g.is_active),click:g=>this.onUnblockUser(g)},{color:"warn",type:"icon",icon:"delete",tooltip:this.translateService.instant("userManagement.delete"),click:g=>this.onDeleteUser(g)}]}],this.loading=!1,this.totalItemsCount=0,this.subscriptions=new U.w}ngOnInit(){this.fetchUsersList()}fetchUsersList(){this.loading=!0,this.subscriptions.add(this.userManagementService.fetchUsersList(Object.assign(Object.assign({},this.usersCriteria),{page:this.usersCriteria.page+1})).subscribe(t=>{var n,o,i;(null==t?void 0:t.successful)&&(this.usersData=null===(n=null==t?void 0:t.users)||void 0===n?void 0:n.data,this.totalItemsCount=null===(i=null===(o=null==t?void 0:t.users)||void 0===o?void 0:o.meta)||void 0===i?void 0:i.total),this.loading=!1,this.cdr.detectChanges()},t=>{var n;this.loading=!1,this.cdr.detectChanges(),this.commonService.handleErrorMessage(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}onBlockUser(t){const n=this.dialog.open(m.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.blockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(i=>{i?this.changeUserStatus(t,n):n.close(),o.unsubscribe()})}changeUserStatus(t,n){this.subscriptions.add(this.userManagementService.toggleUserStatus(null==t?void 0:t.uid).subscribe(o=>{(null==o?void 0:o.successful)&&(this.fetchUsersList(),n.close(),this.commonService.handleSuccessMessage(this.translateService.instant("userManagement.blockSuccess"),this.translateService.instant("general.success")))},o=>{var i;this.commonService.handleErrorMessage(null===(i=null==o?void 0:o.error)||void 0===i?void 0:i.message)}))}onUnblockUser(t){const n=this.dialog.open(m.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.unblockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(i=>{i?this.changeUserStatus(t,n):n.close(),o.unsubscribe()})}onDeleteUser(t){console.log(t);const n=this.dialog.open(m.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.deleteConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(i=>{i?this.deleteUser(t,n):n.close(),this.fetchUsersList(),o.unsubscribe()})}deleteUser(t,n){console.log(this.usersData.indexOf(t));const o=this.usersData.indexOf(t);this.subscriptions.add(this.userManagementService.deleteUser(null==t?void 0:t.uid).subscribe(i=>{console.log(i),n.close(),this.usersData.splice(o,1),this.commonService.handleSuccessMessage(this.translateService.instant("userManagement.deleteSuccess"),this.translateService.instant("general.success"))},i=>{var h;this.commonService.handleErrorMessage(null===(h=null==i?void 0:i.error)||void 0===h?void 0:h.message)}))}onPageChanged(t){this.usersCriteria.page=null==t?void 0:t.pageIndex,this.usersCriteria.pageSize=null==t?void 0:t.pageSize,this.fetchUsersList()}onFilterByStatus(t){this.usersCriteria.is_active=null==t?void 0:t.id,this.fetchUsersList()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(f.sK),e.Y36(b.uw),e.Y36(S.v),e.Y36(u),e.Y36(e.sBO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-management"]],decls:24,vars:32,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","pb-4"],[1,"col-lg-6","col-md-6","col-sm-12","title-row"],[1,"title"],[1,"col-lg-6","col-md-6","col-sm-12","button-container"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","items","ngModel","change","ngModelChange"],[1,"row","table-row"],[3,"data","columns","length","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","showPaginator","pageSizeOptions","pageIndex","pageSize","cellTemplate","page"],["first_name",""],["is_active",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"mat-icon",8),e._uU(11,"search"),e.qZA(),e._UZ(12,"input",9),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"mat-form-field",11),e.TgZ(16,"mtx-select",12),e.NdJ("change",function(i){return n.onFilterByStatus(i)})("ngModelChange",function(i){return n.usersCriteria.is_active=i}),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",13),e.TgZ(19,"mtx-grid",14),e.NdJ("page",function(i){return n.onPageChanged(i)}),e.qZA(),e.YNc(20,T,1,2,"ng-template",null,15,e.W1O),e.YNc(22,A,1,1,"ng-template",null,16,e.W1O),e.qZA(),e.qZA()),2&t){const o=e.MAs(21),i=e.MAs(23);e.xp6(4),e.Oqu(e.lcZ(5,22,"menu.userManagement")),e.xp6(8),e.s9C("placeholder",e.lcZ(13,24,"userManagement.search")),e.xp6(4),e.s9C("placeholder",e.lcZ(17,26,"userManagement.userStatus")),e.Q6J("items",n.userStatus)("ngModel",n.usersCriteria.is_active),e.xp6(3),e.Q6J("data",n.usersData)("columns",n.columns)("length",n.totalItemsCount)("loading",n.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("expandable",!1)("showPaginator",!0)("pageSizeOptions",e.DdM(28,Z))("pageIndex",n.usersCriteria.page)("pageSize",n.usersCriteria.pageSize)("cellTemplate",e.WLB(29,E,o,i))}},directives:[x.Hw,O.qo,O.KE,_.MS,c.JJ,c.On,w.CM],pipes:[f.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary);padding-inline-start:4px}.button-container[_ngcontent-%COMP%]{justify-content:end;text-align:end;padding-inline-end:5%}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--text-primary);color:var(--white-color)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #CDCDCD;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{justify-content:end;text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em;justify-content:start;text-align:start}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}"]}),a})()}];let y=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[v.Bz.forChild(B)],v.Bz]}),a})(),L=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[M.ez,y,c.u5,c.UX,C.m8]]}),a})()}}]);