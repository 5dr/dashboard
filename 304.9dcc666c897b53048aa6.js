"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[304],{690:(b,h,i)=>{i.d(h,{v:()=>C});var f=i(2340),d=i(7716),M=i(2290),p=i(7460),S=i(8583),u=i(1841);let C=(()=>{class g{constructor(r,m,U,v){this.toaster=r,this.translateService=m,this.datePipe=U,this.http=v}dateMapping(r,m){return this.datePipe.transform(r,m)}handleSuccessMessage(r,m){this.toaster.success(r,m)}handleErrorMessage(r){this.toaster.error(r,this.translateService.instant("general.error"))}uploadImg(r){return this.http.post(`${f.N.endPointUrl}user/hosting/upload-images`,r)}}return g.\u0275fac=function(r){return new(r||g)(d.LFG(M._W),d.LFG(p.sK),d.LFG(S.uU),d.LFG(u.eN))},g.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2304:(b,h,i)=>{i.r(h),i.d(h,{UserManagementModule:()=>E});var f=i(8583),d=i(3679),M=i(4284),p=i(3423),S=i(690),u=i(1393),C=i(5319),g=i(8784),e=i(7716),r=i(7460),m=i(8966),U=i(5245),v=i(7322),O=i(5870),x=i(1576);function _(a,c){if(1&a&&e._uU(0),2&a){const t=c.$implicit;e.AsE(" ",t.first_name," ",null==t?null:t.last_name," ")}}function P(a,c){if(1&a&&e._uU(0),2&a){const t=c.$implicit;e.hij(" ",null!=t&&t.is_active?"Active":"Not Active"," ")}}const w=function(){return[5,10,50,100]},T=function(a,c){return{first_name:a,is_active:c}},A=[{path:"",component:(()=>{class a{constructor(t,n,o,s){this.translateService=t,this.dialog=n,this.commonService=o,this.userManagementService=s,this.usersCriteria={page:0,pageSize:5,is_active:""},this.userStatus=[{id:1,name:"Active"},{id:0,name:"Not Active"}],this.usersData=[],this.columns=[{header:this.translateService.instant("userManagement.id"),field:"id"},{header:this.translateService.instant("userManagement.userName"),field:"first_name"},{header:this.translateService.instant("userManagement.email"),field:"email"},{header:this.translateService.instant("userManagement.userPhone"),field:"phone_number"},{header:this.translateService.instant("userManagement.permissionsCount"),field:"permissions_count"},{header:this.translateService.instant("userManagement.status"),field:"is_active"},{header:this.translateService.instant("userManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"warn",type:"icon",icon:"lock",tooltip:this.translateService.instant("userManagement.block"),iif:l=>!0===Boolean(l.is_active),click:l=>this.onBlockUser(l)},{color:"success",type:"icon",icon:"lock_open",tooltip:this.translateService.instant("userManagement.unblock"),iif:l=>!1===Boolean(l.is_active),click:l=>this.onUnblockUser(l)},{color:"warn",type:"icon",icon:"delete",tooltip:this.translateService.instant("userManagement.delete"),click:l=>this.onDeleteUser(l)}]}],this.loading=!1,this.subscriptions=new C.w}ngOnInit(){this.fetchUsersList()}fetchUsersList(){this.loading=!0,this.subscriptions.add(this.userManagementService.fetchUsersList(this.usersCriteria).subscribe(t=>{var n;this.loading=!1,console.log(t),(null==t?void 0:t.successful)&&(this.usersData=null===(n=null==t?void 0:t.users)||void 0===n?void 0:n.data)},t=>{var n;this.commonService.handleErrorMessage(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message)}))}onBlockUser(t){const n=this.dialog.open(u.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.blockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(s=>{s?this.changeUserStatus(t,n):n.close(),o.unsubscribe()})}changeUserStatus(t,n){this.subscriptions.add(this.userManagementService.toggleUserStatus(null==t?void 0:t.uid).subscribe(o=>{(null==o?void 0:o.successful)&&(this.fetchUsersList(),console.log(t),n.close(),this.commonService.handleSuccessMessage(this.translateService.instant("userManagement.blockSuccess"),this.translateService.instant("general.success")))},o=>{var s;this.commonService.handleErrorMessage(null===(s=null==o?void 0:o.error)||void 0===s?void 0:s.message)}))}onUnblockUser(t){const n=this.dialog.open(u.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.unblockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(s=>{s?this.changeUserStatus(t,n):n.close(),o.unsubscribe()})}onDeleteUser(t){console.log(t);const n=this.dialog.open(u.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("userManagement.deleteConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=n.componentInstance.confirmationEmitter.subscribe(s=>{s?this.deleteUser(t,n):n.close(),o.unsubscribe()})}deleteUser(t,n){console.log(this.usersData.indexOf(t));const o=this.usersData.indexOf(t);this.subscriptions.add(this.userManagementService.deleteUser(null==t?void 0:t.uid).subscribe(s=>{console.log(s),n.close(),this.usersData.splice(o,1),this.commonService.handleSuccessMessage(this.translateService.instant("userManagement.deleteSuccess"),this.translateService.instant("general.success"))},s=>{var l;this.commonService.handleErrorMessage(null===(l=null==s?void 0:s.error)||void 0===l?void 0:l.message)}))}onPageChanged(t){this.usersCriteria.page=null==t?void 0:t.pageIndex,this.usersCriteria.pageSize=null==t?void 0:t.pageSize,this.fetchUsersList()}onFilterByStatus(t){this.usersCriteria.is_active=null==t?void 0:t.id,this.fetchUsersList()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.sK),e.Y36(m.uw),e.Y36(S.v),e.Y36(g.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-management"]],decls:24,vars:31,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","pb-4"],[1,"col-lg-6","col-md-6","col-sm-12","title-row"],[1,"title"],[1,"col-lg-6","col-md-6","col-sm-12","button-container"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","items","ngModel","change","ngModelChange"],[1,"row","table-row"],[3,"data","columns","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","cellTemplate","page"],["first_name",""],["is_active",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e._UZ(6,"div",4),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"mat-icon",8),e._uU(11,"search"),e.qZA(),e._UZ(12,"input",9),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"mat-form-field",11),e.TgZ(16,"mtx-select",12),e.NdJ("change",function(s){return n.onFilterByStatus(s)})("ngModelChange",function(s){return n.usersCriteria.is_active=s}),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",13),e.TgZ(19,"mtx-grid",14),e.NdJ("page",function(s){return n.onPageChanged(s)}),e.qZA(),e.YNc(20,_,1,2,"ng-template",null,15,e.W1O),e.YNc(22,P,1,1,"ng-template",null,16,e.W1O),e.qZA(),e.qZA()),2&t){const o=e.MAs(21),s=e.MAs(23);e.xp6(4),e.Oqu(e.lcZ(5,21,"menu.userManagement")),e.xp6(8),e.s9C("placeholder",e.lcZ(13,23,"userManagement.search")),e.xp6(4),e.s9C("placeholder",e.lcZ(17,25,"userManagement.userStatus")),e.Q6J("items",n.userStatus)("ngModel",n.usersCriteria.is_active),e.xp6(3),e.Q6J("data",n.usersData)("columns",n.columns)("loading",n.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!0)("showPaginator",!0)("pageSizeOptions",e.DdM(27,w))("pageIndex",n.usersCriteria.page)("pageSize",n.usersCriteria.pageSize)("cellTemplate",e.WLB(28,T,o,s))}},directives:[U.Hw,v.qo,v.KE,O.MS,d.JJ,d.On,x.CM],pipes:[r.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary);padding-inline-start:4px}.button-container[_ngcontent-%COMP%]{justify-content:end;text-align:end;padding-inline-end:5%}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--text-primary);color:var(--white-color)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #CDCDCD;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{justify-content:end;text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em;justify-content:start;text-align:start}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}"]}),a})()}];let Z=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[p.Bz.forChild(A)],p.Bz]}),a})(),E=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[f.ez,Z,d.u5,d.UX,M.m8]]}),a})()}}]);