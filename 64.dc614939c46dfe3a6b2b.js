"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[64],{2064:(A,c,i)=>{i.r(c),i.d(c,{RequestsBookingModule:()=>P});var d=i(8583),m=i(2340),e=i(7716),f=i(1841);let v=(()=>{class n{constructor(t){this.http=t}fetchBookingRequestsList(t){return console.log(t),this.http.get(`${m.N.endPointUrl}admin/booking-list`,{params:t})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var r=i(3679),b=i(690),k=i(5319),u=i(7460),g=i(3423),C=i(5245),p=i(7322),h=i(5870),M=i(1576);function y(n,a){if(1&n&&(e.TgZ(0,"mtx-option",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,"bookingManagement."+(null==t?null:t.name)),"")}}const S=function(n){return["booking-details",n]};function R(n,a){if(1&n&&(e.TgZ(0,"a",16),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("routerLink",e.VKq(2,S,t.id)),e.xp6(1),e.hij(" ",null==t?null:t.property_name," ")}}const w=function(){return[5,10,50,100]},x=function(n){return{booking:n}},O=[{path:"",component:(()=>{class n{constructor(t,o,s,l){this.translateService=t,this.commonService=o,this.router=s,this.bookingRequestsService=l,this.propertySearchQuery=new r.NI,this.hostSearchQuery=new r.NI,this.loading=!1,this.subscriptions=new k.w,this.totalItemsCount=0,this.bookingRequestsData=[],this.bookingCriteria={page:0,pageSize:10,date:"",status:8,search:""},this.bookingStatus=[{id:8,name:"pending"},{id:6,name:"cancelled"},{id:9,name:"rejected"},{id:10,name:"pendingReview"}],this.columns=[{header:this.translateService.instant("bookingManagement.propertyName"),field:"property_name"},{header:this.translateService.instant("bookingManagement.propertyType"),field:"property_type"},{header:this.translateService.instant("bookingManagement.noOfNights"),field:"no_of_nights"},{header:this.translateService.instant("bookingManagement.bookedFrom"),field:"booked_from",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("bookingManagement.bookedTo"),field:"booked_to",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("bookingManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"info",type:"icon",icon:"visibility",tooltip:this.translateService.instant("bookingManagement.viewDetails"),click:T=>this.onViewDetails(T)}]}]}ngOnInit(){this.fetchBookingRequestsList()}fetchBookingRequestsList(){console.log(this.bookingCriteria),this.loading=!0,this.subscriptions.add(this.bookingRequestsService.fetchBookingRequestsList(Object.assign(Object.assign({},this.bookingCriteria),{page:this.bookingCriteria.page+1})).subscribe({next:t=>{var o,s;this.bookingRequestsData=t.bookings.data,this.totalItemsCount=null===(s=null===(o=null==t?void 0:t.bookings)||void 0===o?void 0:o.meta)||void 0===s?void 0:s.total,this.loading=!1},error:t=>{var o;this.loading=!1,this.commonService.handleErrorMessage(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.message)}}))}onViewDetails(t){this.router.navigate(["/booking-management/booking-details",t.id])}onFilterByStatus(t){t?(this.bookingCriteria.status=t,this.fetchBookingRequestsList()):(this.bookingCriteria.status="",this.fetchBookingRequestsList())}onPageChanged(t){this.bookingCriteria.page=null==t?void 0:t.pageIndex,this.bookingCriteria.pageSize=t.pageSize,this.fetchBookingRequestsList()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.sK),e.Y36(b.v),e.Y36(g.F0),e.Y36(v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-booking-requests"]],decls:21,vars:33,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","title-row","pb-4"],[1,"title"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"formControl","placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","clearable","ngModel","change","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row","table-row"],[3,"data","columns","loading","length","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","cellTemplate","page"],["booking",""],[3,"value"],[3,"routerLink"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"mat-icon",6),e._uU(9,"search"),e.qZA(),e._UZ(10,"input",7),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"mat-form-field",9),e.TgZ(14,"mtx-select",10),e.NdJ("change",function(l){return o.onFilterByStatus(l)})("ngModelChange",function(l){return o.bookingCriteria.status=l}),e.ALo(15,"translate"),e.YNc(16,y,3,4,"mtx-option",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",12),e.TgZ(18,"mtx-grid",13),e.NdJ("page",function(l){return o.onPageChanged(l)}),e.qZA(),e.YNc(19,R,2,4,"ng-template",null,14,e.W1O),e.qZA(),e.qZA()),2&t){const s=e.MAs(20);e.xp6(3),e.Oqu(e.lcZ(4,24,"menu.bookingRequests")),e.xp6(7),e.s9C("placeholder",e.lcZ(11,26,"bookingManagement.hostSearch")),e.Q6J("formControl",o.propertySearchQuery),e.xp6(4),e.s9C("placeholder",e.lcZ(15,28,"bookingManagement.bookingStatus")),e.Q6J("clearable",!1)("ngModel",o.bookingCriteria.status),e.xp6(2),e.Q6J("ngForOf",o.bookingStatus),e.xp6(2),e.Q6J("data",o.bookingRequestsData)("columns",o.columns)("loading",o.loading)("length",o.totalItemsCount)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!1)("showPaginator",!0)("pageSizeOptions",e.DdM(30,w))("pageIndex",o.bookingCriteria.page)("pageSize",o.bookingCriteria.pageSize)("cellTemplate",e.VKq(31,x,s))}},directives:[C.Hw,p.qo,r.Fj,r.JJ,r.oH,p.KE,h.MS,r.On,d.sg,M.CM,h.Jd,g.yS],pipes:[u.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #cdcdcd;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}"]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(O)],g.Bz]}),n})();var B=i(4284),Z=i(5693);let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,q,r.u5,r.UX,B.m8,Z.X]]}),n})()}}]);