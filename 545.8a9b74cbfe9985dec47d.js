"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[545],{4512:(q,y,p)=>{p.d(y,{H:()=>w});var c=p(8966),u=p(690),P=p(5319),x=p(4295),i=p(7716),h=p(7460),d=p(7093),M=p(7423),t=p(5245),f=p(7322),A=p(8833),T=p(3679);let w=(()=>{class Z{constructor(g,_,v,D,b){this.data=g,this.dialogRef=_,this.propertiesManagementService=v,this.commonService=D,this.translateService=b,this.reason="",this.subscriptions=new P.w}ngOnInit(){}rejectProperty(){const g={status:7,reason:this.reason};(null==g?void 0:g.reason)&&this.subscriptions.add(this.propertiesManagementService.updatePropertyStatus(this.data.propertyId,g).subscribe(_=>{console.log(_),this.commonService.handleSuccessMessage(this.translateService.instant("propertiesManagement.propertyRejectSuccess"),this.translateService.instant("general.success")),this.dialogRef.close({isSent:!0})},_=>{var v;this.commonService.handleErrorMessage(null===(v=null==_?void 0:_.error)||void 0===v?void 0:v.message)}))}onSend(){this.rejectProperty()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return Z.\u0275fac=function(g){return new(g||Z)(i.Y36(c.WI),i.Y36(c.so),i.Y36(x.T),i.Y36(u.v),i.Y36(h.sK))},Z.\u0275cmp=i.Xpm({type:Z,selectors:[["app-reject-property"]],decls:28,vars:17,consts:[[1,"popup-container"],["mat-dialog-title","",1,"d-flex","align-items-center","head"],["fxFlex",""],["mat-icon-button","","matDialogClose","",1,"mat-close-modal"],[1,"content-wrapper"],[1,"example-full-width"],["matInput","",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","justify-content-center","w-100","mb-4","confirmation-btns"],["mat-stroked-button","","matDialogClose","",1,"btn","cancel-btn"],[1,"mx-2"],["mat-flat-button","",1,"btn","confirm-btn",3,"disabled","click"]],template:function(g,_){1&g&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"span",2),i.TgZ(3,"h5"),i._uU(4),i.ALo(5,"translate"),i.qZA(),i._UZ(6,"span",2),i.TgZ(7,"button",3),i.TgZ(8,"mat-icon"),i._uU(9,"close"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(10,"mat-dialog-content",4),i.TgZ(11,"mat-form-field",5),i.TgZ(12,"mat-label"),i._uU(13),i.ALo(14,"translate"),i.qZA(),i.TgZ(15,"textarea",6),i.NdJ("ngModelChange",function(D){return _.reason=D}),i.ALo(16,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"mat-dialog-actions"),i.TgZ(18,"div",7),i.TgZ(19,"button",8),i.TgZ(20,"span"),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.qZA(),i._UZ(23,"span",9),i.TgZ(24,"button",10),i.NdJ("click",function(){return _.onSend()}),i.TgZ(25,"span"),i._uU(26),i.ALo(27,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&g&&(i.xp6(4),i.Oqu(i.lcZ(5,7,"propertiesManagement.rejectProperty")),i.xp6(9),i.Oqu(i.lcZ(14,9,"propertiesManagement.rejectionReasons")),i.xp6(2),i.s9C("placeholder",i.lcZ(16,11,"propertiesManagement.enterReasons")),i.Q6J("ngModel",_.reason),i.xp6(6),i.Oqu(i.lcZ(22,13,"general.cancel")),i.xp6(3),i.Q6J("disabled",!_.reason),i.xp6(2),i.Oqu(i.lcZ(27,15,"general.send")))},directives:[c.uh,d.yH,M.lW,c.ZT,t.Hw,c.xY,f.KE,f.hX,A.Nt,T.Fj,T.JJ,T.On,c.H8],pipes:[h.X$],styles:[".head[_ngcontent-%COMP%]{justify-content:center!important}.head[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:0}.mat-close-modal[_ngcontent-%COMP%]{line-height:1em!important}.content-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.content-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:8em}.confirmation-btns[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em}.confirmation-btns[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color)}"]}),Z})()},7545:(q,y,p)=>{p.r(y),p.d(y,{PropertiesManagementModule:()=>Rt});var c=p(8583),u=p(3679),P=p(4284),x=p(5319),i=p(4295),h=p(4512),d=p(690),M=p(2340),t=p(7716),f=p(3423),A=p(7460),T=p(8966),w=p(9224),Z=p(5693),C=p(7423);function g(n,a){if(1&n&&(t.TgZ(0,"div",22),t._UZ(1,"img",23),t.qZA()),2&n){const e=a.$implicit,r=t.oxw(3);t.xp6(1),t.Q6J("src",e,t.LSH)("alt",r.propertyData.name)}}function _(n,a){if(1&n&&(t.TgZ(0,"div",15),t.TgZ(1,"div",16),t.TgZ(2,"swiper",17),t.TgZ(3,"div",18),t.YNc(4,g,2,2,"div",19),t.qZA(),t._UZ(5,"div",20),t._UZ(6,"div",21),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("config",e.config),t.xp6(2),t.Q6J("ngForOf",e.propertyImages)}}function v(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"img",27),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.Avatar")),t.xp6(2),t.Q6J("src",e.propertyData.user.avatar,t.LSH)}}function D(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.PhoneNumber")),t.xp6(3),t.Oqu(e.propertyData.user.phone_number)}}function b(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.Email")),t.xp6(3),t.Oqu(e.propertyData.user.email)}}function U(n,a){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"h5",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,v,5,4,"div",10),t.TgZ(5,"div",24),t.TgZ(6,"p",25),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"p",26),t._uU(10),t.qZA(),t.qZA(),t.YNc(11,D,6,4,"div",10),t.YNc(12,b,6,4,"div",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,6,"propertiesManagement.HostDetails")),t.xp6(2),t.Q6J("ngIf",e.propertyData.user.avatar),t.xp6(3),t.Oqu(t.lcZ(8,8,"propertiesManagement.HostName")),t.xp6(3),t.Oqu(e.propertyData.user.first_name+" "+e.propertyData.user.last_name),t.xp6(1),t.Q6J("ngIf",e.propertyData.user.phone_number),t.xp6(1),t.Q6J("ngIf",e.propertyData.user.email)}}function I(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.propertyName")),t.xp6(3),t.Oqu(e.propertyData.name)}}function L(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"propertiesManagement.Area")),t.xp6(3),t.AsE(" ",e.propertyData.area," ",t.lcZ(6,5,"propertiesManagement.SquareM")," ")}}function N(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.propertyType")),t.xp6(3),t.hij(" ","ar"===e.lang?e.propertyData.type.name_ar:e.propertyData.type.name_en," ")}}function J(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Draft")))}function Y(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.PendingApproval")))}function Q(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Published")))}function V(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Unlisted")))}function E(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Blocked")))}function j(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Deleted")))}function B(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"propertiesManagement.Rejected")))}function R(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t.YNc(5,J,3,3,"span",12),t.YNc(6,Y,3,3,"span",12),t.YNc(7,Q,3,3,"span",12),t.YNc(8,V,3,3,"span",12),t.YNc(9,E,3,3,"span",12),t.YNc(10,j,3,3,"span",12),t.YNc(11,B,3,3,"span",12),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,8,"propertiesManagement.Status")),t.xp6(3),t.Q6J("ngIf",1===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",2===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",3===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",4===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",5===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",6===(null==e.propertyData?null:e.propertyData.status)),t.xp6(1),t.Q6J("ngIf",7===(null==e.propertyData?null:e.propertyData.status))}}function k(n,a){if(1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.propertyDescription")),t.xp6(3),t.Oqu(e.propertyData.description)}}function z(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.noOfBedrooms")),t.xp6(3),t.Oqu(e.propertyData.no_of_bedrooms)}}function W(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.NumberBathrooms")),t.xp6(3),t.Oqu(e.propertyData.no_of_bathrooms)}}function F(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.Numberkitchens")),t.xp6(3),t.Oqu(e.propertyData.no_of_kitchens)}}function H(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.BasePrice")),t.xp6(3),t.hij("",e.propertyData.base_price," SAR")}}function K(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.country")),t.xp6(3),t.Oqu(e.propertyData.country)}}function $(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.city")),t.xp6(3),t.Oqu(e.propertyData.city)}}function X(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.street")),t.xp6(3),t.Oqu(e.propertyData.street)}}function G(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.zip_code")),t.xp6(3),t.Oqu(e.propertyData.zip_code)}}function tt(n,a){if(1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.location")),t.xp6(3),t.Oqu(e.propertyData.location)}}function et(n,a){if(1&n&&(t.TgZ(0,"li",31),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",null==e||null==e.amenity_name?null:e.amenity_name.name," ")}}function nt(n,a){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"h5",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",28),t.TgZ(5,"ul",29),t.YNc(6,et,2,1,"li",30),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.OfferedAmenities")),t.xp6(4),t.Q6J("ngForOf",null==e.propertyData?null:e.propertyData.amenities)}}function it(n,a){1&n&&t._UZ(0,"hr")}function at(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.SameDayOption")," "))}function rt(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.OneDay")," "))}function ot(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.TwoDays")," "))}function pt(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.ThreeDays")," "))}function st(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.SevenDays")," "))}function lt(n,a){if(1&n&&(t.TgZ(0,"div",32),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",26),t.YNc(5,at,3,3,"p",33),t.YNc(6,rt,3,3,"p",33),t.YNc(7,ot,3,3,"p",33),t.YNc(8,pt,3,3,"p",33),t.YNc(9,st,3,3,"p",33),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,6,"propertiesManagement.AdvanceNotice")),t.xp6(3),t.Q6J("ngIf",0===e.propertyData.advance_notice),t.xp6(1),t.Q6J("ngIf",1===e.propertyData.advance_notice),t.xp6(1),t.Q6J("ngIf",2===e.propertyData.advance_notice),t.xp6(1),t.Q6J("ngIf",3===e.propertyData.advance_notice),t.xp6(1),t.Q6J("ngIf",7===e.propertyData.advance_notice)}}function ct(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.9AM")," "))}function dt(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.10AM")," "))}function _t(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.BeforeCheck")," "))}function gt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,ct,3,3,"p",33),t.YNc(5,dt,3,3,"p",33),t.YNc(6,_t,3,3,"p",33),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,"propertiesManagement.SameDay")),t.xp6(2),t.Q6J("ngIf",9===(null==e.propertyData?null:e.propertyData.cut_off_time)),t.xp6(1),t.Q6J("ngIf",10===(null==e.propertyData?null:e.propertyData.cut_off_time)),t.xp6(1),t.Q6J("ngIf",0===(null==e.propertyData?null:e.propertyData.cut_off_time))}}function mt(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.3Months")," "))}function ut(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.6Months")," "))}function vt(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.9Months")," "))}function ht(n,a){1&n&&(t.TgZ(0,"p",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"propertiesManagement.12Months")," "))}function ft(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,mt,3,3,"p",33),t.YNc(5,ut,3,3,"p",33),t.YNc(6,vt,3,3,"p",33),t.YNc(7,ht,3,3,"p",33),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"propertiesManagement.AvailabilityWindow")),t.xp6(2),t.Q6J("ngIf",3===(null==e.propertyData?null:e.propertyData.guests_book_time)),t.xp6(1),t.Q6J("ngIf",6===(null==e.propertyData?null:e.propertyData.guests_book_time)),t.xp6(1),t.Q6J("ngIf",9===(null==e.propertyData?null:e.propertyData.guests_book_time)),t.xp6(1),t.Q6J("ngIf",12===(null==e.propertyData?null:e.propertyData.guests_book_time))}}function Zt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij("",t.lcZ(3,2,"propertiesManagement.Check-in")," :"),t.xp6(3),t.Oqu(e.handleTimePreview(e.propertyData.ci_arrive_after))}}function yt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.Check-out")),t.xp6(3),t.Oqu(e.handleTimePreview(e.propertyData.ci_leave_before))}}function xt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.TripLengthOne")),t.xp6(3),t.Oqu(e.propertyData.min_stay)}}function Mt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.TripLengthTwo")),t.xp6(3),t.Oqu(e.propertyData.max_stay)}}function At(n,a){1&n&&t._UZ(0,"hr")}function Tt(n,a){if(1&n&&(t.TgZ(0,"li",31),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.blocked_date,"d MMM, y")," ")}}function Pt(n,a){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"h5",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",28),t.TgZ(5,"ul",29),t.YNc(6,Tt,3,4,"li",30),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"propertiesManagement.BlockedDates")),t.xp6(4),t.Q6J("ngForOf",null==e.propertyData?null:e.propertyData.blocked_dates)}}function Dt(n,a){1&n&&t._UZ(0,"hr")}function Ct(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,2,"propertiesManagement.BasePrice")," :"),t.xp6(3),t.Oqu(null==e.propertyData?null:e.propertyData.base_price)}}function wt(n,a){if(1&n&&(t.TgZ(0,"div",24),t.TgZ(1,"p",25),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.qZA(),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.hij("",t.lcZ(3,2,"bookingManagement.Insurance")," :"),t.xp6(3),t.Oqu(null==e.propertyData?null:e.propertyData.insurance)}}function bt(n,a){if(1&n&&(t.TgZ(0,"div",8),t.TgZ(1,"h5",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ct,6,4,"div",10),t.YNc(5,wt,6,4,"div",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"bookingManagement.PriceDetails")),t.xp6(2),t.Q6J("ngIf",e.propertyData.base_price),t.xp6(1),t.Q6J("ngIf",e.propertyData.base_price)}}function Ot(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"div",35),t.TgZ(2,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onActionClicked("reject")}),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onActionClicked("approve")}),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,2,"propertiesManagement.reject")),t.xp6(4),t.Oqu(t.lcZ(9,4,"propertiesManagement.approve")))}function qt(n,a){if(1&n&&(t.TgZ(0,"div",5),t.YNc(1,_,7,2,"div",6),t.YNc(2,U,13,10,"div",7),t._UZ(3,"hr"),t.TgZ(4,"div",8),t.TgZ(5,"h5",9),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,I,6,4,"div",10),t.YNc(9,L,7,7,"div",10),t.YNc(10,N,6,4,"div",10),t.YNc(11,R,12,10,"div",10),t.YNc(12,k,6,4,"div",11),t.YNc(13,z,6,4,"div",10),t.YNc(14,W,6,4,"div",10),t.YNc(15,F,6,4,"div",10),t.YNc(16,H,6,4,"div",10),t.qZA(),t._UZ(17,"hr"),t.TgZ(18,"div",8),t.TgZ(19,"h5",9),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,K,6,4,"div",10),t.YNc(23,$,6,4,"div",10),t.YNc(24,X,6,4,"div",10),t.YNc(25,G,6,4,"div",10),t.YNc(26,tt,6,4,"div",11),t.qZA(),t._UZ(27,"hr"),t.YNc(28,nt,7,4,"div",7),t.YNc(29,it,1,0,"hr",12),t.TgZ(30,"div",8),t.TgZ(31,"h5",9),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.YNc(34,lt,10,8,"div",13),t.YNc(35,gt,7,6,"div",10),t.YNc(36,ft,8,7,"div",10),t.YNc(37,Zt,6,4,"div",10),t.YNc(38,yt,6,4,"div",10),t.YNc(39,xt,6,4,"div",10),t.YNc(40,Mt,6,4,"div",10),t.qZA(),t.YNc(41,At,1,0,"hr",12),t.YNc(42,Pt,7,4,"div",7),t.YNc(43,Dt,1,0,"hr",12),t.YNc(44,bt,6,5,"div",7),t.YNc(45,Ot,10,6,"div",14),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.propertyImages?null:e.propertyImages.length),t.xp6(1),t.Q6J("ngIf",e.propertyData.user),t.xp6(4),t.Oqu(t.lcZ(7,33,"propertiesManagement.PropertyDetails")),t.xp6(2),t.Q6J("ngIf",e.propertyData.name),t.xp6(1),t.Q6J("ngIf",e.propertyData.area),t.xp6(1),t.Q6J("ngIf",e.propertyData.type.property_type),t.xp6(1),t.Q6J("ngIf",e.propertyData.status),t.xp6(1),t.Q6J("ngIf",e.propertyData.description),t.xp6(1),t.Q6J("ngIf",e.propertyData.no_of_bedrooms),t.xp6(1),t.Q6J("ngIf",e.propertyData.no_of_bathrooms),t.xp6(1),t.Q6J("ngIf",e.propertyData.no_of_kitchens),t.xp6(1),t.Q6J("ngIf",e.propertyData.base_price),t.xp6(4),t.Oqu(t.lcZ(21,35,"propertiesManagement.LocationDetails")),t.xp6(2),t.Q6J("ngIf",e.propertyData.country),t.xp6(1),t.Q6J("ngIf",e.propertyData.city),t.xp6(1),t.Q6J("ngIf",e.propertyData.street),t.xp6(1),t.Q6J("ngIf",e.propertyData.zip_code),t.xp6(1),t.Q6J("ngIf",e.propertyData.location),t.xp6(2),t.Q6J("ngIf",null==e.propertyData||null==e.propertyData.amenities?null:e.propertyData.amenities.length),t.xp6(1),t.Q6J("ngIf",null==e.propertyData||null==e.propertyData.amenities?null:e.propertyData.amenities.length),t.xp6(3),t.Oqu(t.lcZ(33,37,"propertiesManagement.Availability")),t.xp6(2),t.Q6J("ngIf",e.propertyData.advance_notice),t.xp6(1),t.Q6J("ngIf",e.propertyData.cut_off_time),t.xp6(1),t.Q6J("ngIf",e.propertyData.guests_book_time),t.xp6(1),t.Q6J("ngIf",e.propertyData.ci_arrive_after),t.xp6(1),t.Q6J("ngIf",e.propertyData.ci_leave_before),t.xp6(1),t.Q6J("ngIf",e.propertyData.min_stay),t.xp6(1),t.Q6J("ngIf",e.propertyData.max_stay),t.xp6(1),t.Q6J("ngIf",null==e.propertyData||null==e.propertyData.blocked_dates?null:e.propertyData.blocked_dates.length),t.xp6(1),t.Q6J("ngIf",null==e.propertyData||null==e.propertyData.blocked_dates?null:e.propertyData.blocked_dates.length),t.xp6(1),t.Q6J("ngIf",null==e.propertyData?null:e.propertyData.base_price),t.xp6(1),t.Q6J("ngIf",e.priceDetails),t.xp6(1),t.Q6J("ngIf",2===e.propertyData.status)}}let St=(()=>{class n{constructor(e,r,o,s,m,l){this.propertiesManagementService=e,this.router=r,this.route=o,this.translateService=s,this.dialog=m,this.commonService=l,this.config={slidesPerView:1,spaceBetween:30,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},this.subscriptions=new x.w,this.propertyImages=[],this.lang=M.N.lang}ngOnInit(){this.getPropertyId()}fetchPropertyDataById(){this.propertiesManagementService.fetchPropertyDetails(this.propertyId).subscribe({next:e=>{var r;(null==e?void 0:e.successful)&&(this.propertyData=e.data[0],console.log(this.propertyData),this.propertyImages.push(null===(r=e.data[0])||void 0===r?void 0:r.cover_photo),this.propertyData.images.map(o=>{this.propertyImages.push(null==o?void 0:o.image_url)}))}})}getPropertyId(){this.sub=this.route.params.subscribe(e=>{this.propertyId=e.id,this.fetchPropertyDataById()})}handleTimePreview(e){return e/12==0?this.translateService.instant("12 AM"):e/12==1?this.translateService.instant("12 PM"):e/12==2?this.translateService.instant("12 AM (Next Day)"):e/12<1?e+this.translateService.instant(" AM"):e/12<2?e-12+this.translateService.instant(" PM"):e/12<3?e-24+this.translateService.instant(" AM (Next Day)"):""}onActionClicked(e){var r;if("reject"==e){const s=this.dialog.open(h.H,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{propertyData:this.propertyData}}).afterClosed().subscribe(()=>{s.unsubscribe()})}else"approve"==e&&this.subscriptions.add(this.propertiesManagementService.updatePropertyStatus(null===(r=this.propertyData)||void 0===r?void 0:r.uid,{status:3}).subscribe(s=>{this.commonService.handleSuccessMessage(this.translateService.instant("propertiesManagement.propertyAcceptSuccess"),this.translateService.instant("general.success")),this.router.navigateByUrl("/properties-approval")},s=>{var m;this.commonService.handleErrorMessage(null===(m=null==s?void 0:s.error)||void 0===m?void 0:m.message)}))}onAcceptProperty(){this.subscriptions.add(this.propertiesManagementService.updatePropertyStatus(this.propertyId,{status:3}).subscribe(r=>{console.log(r),this.commonService.handleSuccessMessage(this.translateService.instant("propertiesManagement.propertyAcceptSuccess"),this.translateService.instant("general.success")),this.propertyData.status=3},r=>{var o;this.commonService.handleErrorMessage(null===(o=null==r?void 0:r.error)||void 0===o?void 0:o.message)}))}onRejectProperty(){const r=this.dialog.open(h.H,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{propertyId:this.propertyId}}).afterClosed().subscribe(o=>{(null==o?void 0:o.isSent)&&(this.propertyData.status=7),r.unsubscribe()})}ngOnDestroy(){this.sub.unsubscribe(),this.subscriptions.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.T),t.Y36(f.F0),t.Y36(f.gz),t.Y36(A.sK),t.Y36(T.uw),t.Y36(d.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view-property-details"]],decls:8,vars:4,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"d-flex","justify-content-between","align-items-center","pb-4"],[1,"row","title-row"],[1,"title"],["class","row content-wrapper",4,"ngIf"],[1,"row","content-wrapper"],["class","col-md-12 mb-4",4,"ngIf"],["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"wrapper-head"],["class","info-section",4,"ngIf"],["class","info-section long",4,"ngIf"],[4,"ngIf"],["class","info-section w-100",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","mb-4"],[1,"images-slider-wrapper"],[3,"config"],[1,"swiper-wrapper"],["class","swiper-slide",4,"ngFor","ngForOf"],[1,"swiper-button-next"],[1,"swiper-button-prev"],[1,"swiper-slide"],[3,"src","alt"],[1,"info-section"],[1,"head"],[1,"data"],["alt","",1,"avatar",3,"src"],[1,"info-section","long"],[1,"d-flex","justify-content-start","align-items-center","flex-wrap"],["class","data w-25 mb-1",4,"ngFor","ngForOf"],[1,"data","w-25","mb-1"],[1,"info-section","w-100"],["class","data",4,"ngIf"],[1,"col-md-12"],[1,"d-flex","justify-content-center","align-items-center","confirmation-btns"],["mat-stroked-button","",1,"btn","mr-1","ml-1","reject-btn",3,"click"],["mat-flat-button","",1,"btn","mr-1","ml-1","approve-btn",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"h3",3),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(7,qt,46,39,"div",4),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"propertiesManagement.PropertyDetails")),t.xp6(2),t.Q6J("ngIf",r.propertyData))},directives:[w.a8,c.O5,Z.n,c.sg,C.lW],pipes:[A.X$,c.uU],styles:[".title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary)}.status[_ngcontent-%COMP%]{color:var(--main-txt-color);padding:8px 13px;border:1px solid var(--grey-color);width:-moz-fit-content;width:fit-content;border-radius:10px}.content-wrapper[_ngcontent-%COMP%]   .images-slider-wrapper[_ngcontent-%COMP%]{margin-bottom:2em}.content-wrapper[_ngcontent-%COMP%]   .images-slider-wrapper[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]{height:20em}.content-wrapper[_ngcontent-%COMP%]   .images-slider-wrapper[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:5px}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .wrapper-head[_ngcontent-%COMP%]{margin-bottom:1em;text-align:start;color:var(--text-primary);font-weight:600}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{display:inline-block;text-align:start;margin-bottom:1.5em;vertical-align:top;width:50%}@media (max-width: 576px){.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]{width:100%;display:block}}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{line-height:20px;margin-bottom:.5em;color:var(--main-txt-color);font-size:16px}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-inline-start:15px;color:red}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .info-section[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{opacity:.8;font-size:16px;margin-bottom:0}.content-wrapper[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .long[_ngcontent-%COMP%]{width:100%!important;display:block!important}.avatar[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;border:1px solid #ddd}.confirmation-btns[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;margin-right:1rem;margin-left:1rem}.confirmation-btns[_ngcontent-%COMP%]   .approve-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color);margin-right:1rem;margin-left:1rem}"]}),n})();var S=p(1393),Ut=p(5435),It=p(4395),Lt=p(5245),O=p(7322),Nt=p(5870),Jt=p(1576);function Yt(n,a){if(1&n&&t._UZ(0,"img",16),2&n){const e=a.$implicit;t.Q6J("src",null==e?null:e.cover_photo,t.LSH)("alt",null==e?null:e.name)}}function Qt(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=a.$implicit,r=t.oxw();t.xp6(1),t.Oqu("ar"===r.lang?e.property_type.name_ar:e.property_type.name_en)}}const Vt=function(){return[1,10,20,30,50]},Et=function(n,a){return{cover_photo:n,property_type:a}},jt=[{path:"",component:(()=>{class n{constructor(e,r,o,s,m){this.translateService=e,this.dialog=r,this.commonService=o,this.propertiesManagementService=s,this.router=m,this.langSelect="",this.propertiesCriteria={page:0,pageSize:1,status:0,property_type:0,search:""},this.propertyStatus=[{id:1,name:"Draft",displayName:this.translateService.instant("propertiesManagement.Draft")},{id:2,name:"pendingForApproval",displayName:this.translateService.instant("propertiesManagement.PendingApproval")},{id:3,name:"published",displayName:this.translateService.instant("propertiesManagement.Published")},{id:4,name:"unlisted",displayName:this.translateService.instant("propertiesManagement.Unlisted")},{id:5,name:"blocked",displayName:this.translateService.instant("propertiesManagement.Blocked")},{id:6,name:"deleted",displayName:this.translateService.instant("propertiesManagement.Deleted")},{id:7,name:"reject",displayName:this.translateService.instant("propertiesManagement.Rejected")}],this.propertyTypes=[],this.propertiesData=[],this.columns=[{header:this.translateService.instant("propertiesManagement.propertyID"),field:"id"},{header:this.translateService.instant("propertiesManagement.propertyImg"),field:"cover_photo"},{header:this.translateService.instant("propertiesManagement.propertyName"),field:"name"},{header:this.translateService.instant("propertiesManagement.propertyType"),field:"type.property_type"},{header:this.translateService.instant("propertiesManagement.noOfBedrooms"),field:"no_of_bedrooms"},{header:this.translateService.instant("propertiesManagement.noOfBathrooms"),field:"no_of_bathrooms"},{header:this.translateService.instant("propertiesManagement.country"),field:"country"},{header:this.translateService.instant("propertiesManagement.city"),field:"city"},{header:this.translateService.instant("propertiesManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"info",type:"icon",icon:"visibility",tooltip:this.translateService.instant("propertiesManagement.viewDetails"),click:l=>this.onViewDetails(l)},{color:"success",type:"icon",icon:"done",tooltip:this.translateService.instant("propertiesManagement.approve"),iif:l=>2===l.status,click:l=>this.onAcceptProperty(l)},{color:"warn",type:"icon",icon:"close",tooltip:this.translateService.instant("propertiesManagement.reject"),iif:l=>2===l.status,click:l=>this.onRejectProperty(l)},{color:"warn",type:"icon",icon:"lock",tooltip:this.translateService.instant("propertiesManagement.block"),iif:l=>3===l.status,click:l=>this.onBlockProperty(l)},{color:"success",type:"icon",icon:"lock_open",iif:l=>5===l.status,tooltip:this.translateService.instant("propertiesManagement.unblock"),click:l=>this.onUnBlockProperty(l)}]}],this.loading=!1,this.totalItemsCount=0,this.lang=M.N.lang,this.propertiesSearchQuery=new u.NI,this.subscriptions=new x.w}ngOnInit(){this.chooesLangSelect(),this.fetchPropertiesList(),this.fetchPropertyTypes(),this.initPropertiesSearch()}chooesLangSelect(){this.langSelect="ar"==this.lang?"name_ar":"name_en"}initPropertiesSearch(){this.subscriptions.add(this.propertiesSearchQuery.valueChanges.pipe((0,Ut.h)(e=>{var r;return(null===(r=null==e?void 0:e.trim())||void 0===r?void 0:r.length)>3||""===(null==e?void 0:e.trim())}),(0,It.b)(700)).subscribe(e=>{this.propertiesCriteria.search=e,this.propertiesCriteria.page=0,this.fetchPropertiesList()}))}fetchPropertiesList(){this.loading=!0,this.propertiesCriteria.status||delete this.propertiesCriteria.status,this.propertiesCriteria.property_type||delete this.propertiesCriteria.property_type,this.subscriptions.add(this.propertiesManagementService.fetchPropertyList(this.propertiesCriteria).subscribe(e=>{var r,o,s;this.loading=!1,this.propertiesData=null===(r=null==e?void 0:e.properties)||void 0===r?void 0:r.data,this.totalItemsCount=null===(s=null===(o=null==e?void 0:e.properties)||void 0===o?void 0:o.meta)||void 0===s?void 0:s.total},e=>{var r;this.commonService.handleErrorMessage(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message)}))}onSelectStatus(e){this.propertiesCriteria.status=null==e?void 0:e.id,this.fetchPropertiesList()}onSelectPropertyType(e){e?(this.propertiesCriteria.property_type=null==e?void 0:e.id,this.fetchPropertiesList()):(this.propertiesCriteria.property_type=void 0,this.fetchPropertiesList())}fetchPropertyTypes(){this.subscriptions.add(this.propertiesManagementService.fetchPropertyTypes().subscribe(e=>{this.propertyTypes=null==e?void 0:e.data},e=>{var r;this.commonService.handleErrorMessage(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.message)}))}onViewDetails(e){this.router.navigate(["/properties-approval/property-details",e.uid])}onAcceptProperty(e){this.subscriptions.add(this.propertiesManagementService.updatePropertyStatus(null==e?void 0:e.uid,{status:3}).subscribe(o=>{console.log(o),this.commonService.handleSuccessMessage(this.translateService.instant("propertiesManagement.propertyAcceptSuccess"),this.translateService.instant("general.success")),this.fetchPropertiesList()},o=>{var s;this.commonService.handleErrorMessage(null===(s=null==o?void 0:o.error)||void 0===s?void 0:s.message)}))}onRejectProperty(e){const o=this.dialog.open(h.H,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{propertyId:null==e?void 0:e.uid}}).afterClosed().subscribe(s=>{(null==s?void 0:s.isSent)&&this.fetchPropertiesList(),o.unsubscribe()})}onBlockProperty(e){const r=this.dialog.open(S.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("propertiesManagement.blockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=r.componentInstance.confirmationEmitter.subscribe(s=>{s?this.blockUnblockProperty("block",e,r):r.close(),o.unsubscribe()})}onUnBlockProperty(e){const r=this.dialog.open(S.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("propertiesManagement.unblockConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),o=r.componentInstance.confirmationEmitter.subscribe(s=>{s?this.blockUnblockProperty("unblock",e,r):r.close(),o.unsubscribe()})}blockUnblockProperty(e,r,o){this.subscriptions.add(this.propertiesManagementService.updatePropertyStatus(null==r?void 0:r.uid,{status:"block"===e?5:3}).subscribe(m=>{console.log(m),o.close(),this.commonService.handleSuccessMessage(this.translateService.instant("block"===e?"propertiesManagement.propertyBlockSuccess":"propertiesManagement.propertyUnblockSuccess"),this.translateService.instant("general.success")),this.fetchPropertiesList()},m=>{var l;this.commonService.handleErrorMessage(null===(l=null==m?void 0:m.error)||void 0===l?void 0:l.message)}))}onPageChanged(e){this.propertiesCriteria.page=(null==e?void 0:e.pageIndex)-1>0?(null==e?void 0:e.pageIndex)-1:0,this.propertiesCriteria.pageSize=e.pageSize,this.fetchPropertiesList()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.sK),t.Y36(T.uw),t.Y36(d.v),t.Y36(i.T),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-properties-management"]],decls:29,vars:40,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","title-row","pb-4"],[1,"title"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"formControl","placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","displayName","bindValue","id",3,"clearable","ngModel","items","ngModelChange","change"],["bindValue","id",3,"clearable","ngModel","bindLabel","items","ngModelChange","change"],[1,"row","table-row"],[3,"data","columns","loading","length","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","showPaginator","pageSizeOptions","pageIndex","pageSize","cellTemplate","page"],["cover_photo",""],["property_type",""],[1,"cover-photo",3,"src","alt"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"mat-icon",6),t._uU(9,"search"),t.qZA(),t._UZ(10,"input",7),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",8),t.TgZ(13,"mat-form-field",9),t.TgZ(14,"mat-placeholder"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mtx-select",10),t.NdJ("ngModelChange",function(s){return r.propertiesCriteria.status=s})("change",function(s){return r.onSelectStatus(s)}),t.qZA(),t.qZA(),t.TgZ(18,"mat-form-field",9),t.TgZ(19,"mat-placeholder"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"mtx-select",11),t.NdJ("ngModelChange",function(s){return r.propertiesCriteria.property_type=s})("change",function(s){return r.onSelectPropertyType(s)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",12),t.TgZ(24,"mtx-grid",13),t.NdJ("page",function(s){return r.onPageChanged(s)}),t.qZA(),t.YNc(25,Yt,1,2,"ng-template",null,14,t.W1O),t.YNc(27,Qt,2,1,"ng-template",null,15,t.W1O),t.qZA(),t.qZA()),2&e){const o=t.MAs(26),s=t.MAs(28);t.xp6(3),t.Oqu(t.lcZ(4,28,"menu.propertiesApproval")),t.xp6(7),t.s9C("placeholder",t.lcZ(11,30,"propertiesManagement.search")),t.Q6J("formControl",r.propertiesSearchQuery),t.xp6(5),t.Oqu(t.lcZ(16,32,"propertiesManagement.propertyStatus")),t.xp6(2),t.Q6J("clearable",!0)("ngModel",r.propertiesCriteria.status)("items",r.propertyStatus),t.xp6(3),t.Oqu(t.lcZ(21,34,"propertiesManagement.propertyType")),t.xp6(2),t.Q6J("clearable",!0)("ngModel",r.propertiesCriteria.property_type)("bindLabel",r.langSelect)("items",r.propertyTypes),t.xp6(2),t.Q6J("data",r.propertiesData)("columns",r.columns)("loading",r.loading)("length",r.totalItemsCount)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("showPaginator",!0)("pageSizeOptions",t.DdM(36,Vt))("pageIndex",r.propertiesCriteria.page)("pageSize",r.propertiesCriteria.pageSize)("cellTemplate",t.WLB(37,Et,o,s))}},directives:[Lt.Hw,O.qo,u.Fj,u.JJ,u.oH,O.KE,O.UY,Nt.MS,u.On,Jt.CM],pipes:[A.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #cdcdcd;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}  .mat-button.mat-success,   .mat-icon-button.mat-success,   .mat-stroked-button.mat-success{color:green}  .mat-button.mat-info,   .mat-icon-button.mat-info,   .mat-stroked-button.mat-info{color:#56aec3}.cover-photo[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:5px;object-fit:cover}"]}),n})()},{path:"property-details/:id",component:St}];let Bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(jt)],f.Bz]}),n})(),Rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[c.ez,Bt,u.u5,u.UX,P.m8,Z.X]]}),n})()},4295:(q,y,p)=>{p.d(y,{T:()=>x});var c=p(2340),u=p(7716),P=p(1841);let x=(()=>{class i{constructor(d){this.http=d}fetchPropertyList(d){return this.http.get(`${c.N.endPointUrl}admin/property-list`,{params:d})}fetchPropertyTypes(){return this.http.get(`${c.N.endPointUrl}user/hosting/property-types`)}updatePropertyStatus(d,M){return this.http.put(`${c.N.endPointUrl}admin/update-status/${d}`,M)}fetchPropertyDetails(d){return this.http.get(`${c.N.endPointUrl}admin/property-details/${d}`)}deleteProperty(d){return this.http.delete(`${c.N.endPointUrl}admin/delete-property/${d}`)}}return i.\u0275fac=function(d){return new(d||i)(u.LFG(P.eN))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);