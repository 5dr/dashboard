"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[970],{690:(S,u,a)=>{a.d(u,{v:()=>M});var d=a(7716),g=a(2290),C=a(69),m=a(8583);let M=(()=>{class l{constructor(c,e,v){this.toaster=c,this.translateService=e,this.datePipe=v}dateMapping(c,e){return this.datePipe.transform(c,e)}handleSuccessMessage(c,e){this.toaster.success(c,e)}handleErrorMessage(c){this.toaster.error(c,this.translateService.instant("general.error"))}}return l.\u0275fac=function(c){return new(c||l)(d.LFG(g._W),d.LFG(C.sK),d.LFG(m.uU))},l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5970:(S,u,a)=>{a.r(u),a.d(u,{CouponsManagementModule:()=>Z});var d=a(8583),g=a(3679),C=a(4284),m=a(3423),M=a(5319),l=a(322),h=a(6691),c=a(1393),e=a(7716),v=a(69),b=a(8966),x=a(690),y=a(7423),T=a(5245),f=a(7322),D=a(3157),P=a(1655);const A=function(){return[5,10,50,100]},O=[{path:"",component:(()=>{class s{constructor(t,o,n,i){this.translateService=t,this.dialog=o,this.commonService=n,this.couponsManagementService=i,this.couponStatus=[{id:1,name:"Active"},{id:2,name:"Not Active"}],this.couponsData=[],this.columns=[{header:this.translateService.instant("couponsManagement.id"),field:"id"},{header:this.translateService.instant("couponsManagement.code"),field:"code"},{header:this.translateService.instant("couponsManagement.discountType"),field:"type"},{header:this.translateService.instant("couponsManagement.amount"),field:"amount"},{header:this.translateService.instant("couponsManagement.percentage"),field:"percentage"},{header:this.translateService.instant("couponsManagement.startDate"),field:"startDate",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("couponsManagement.expiryDate"),field:"expiryDate",type:"date",typeParameter:{format:"yyyy-MM-dd"}},{header:this.translateService.instant("couponsManagement.status"),field:"status"},{header:this.translateService.instant("couponsManagement.actions"),field:"operation",width:"300px",minWidth:300,type:"button",buttons:[{color:"info",type:"icon",icon:"edit",tooltip:this.translateService.instant("couponsManagement.edit"),click:r=>this.onEditCoupon(r)},{color:"warn",type:"icon",icon:"lock",tooltip:this.translateService.instant("couponsManagement.deactivate"),iif:r=>"Active"===r.status,click:r=>this.onDeactivateCoupon(r)},{color:"success",type:"icon",icon:"lock_open",tooltip:this.translateService.instant("couponsManagement.activate"),iif:r=>"notActive"===r.status,click:r=>this.onActivateCoupon(r)},{color:"warn",type:"icon",icon:"delete",tooltip:this.translateService.instant("couponsManagement.delete"),click:r=>this.onDeleteCoupon(r)}]}],this.loading=!1,this.subscriptions=new M.w}ngOnInit(){this.fetchCouponsList()}fetchCouponsList(){this.couponsData=[{id:1,code:"EDD77",status:"Active",type:"Amount",amount:5,percentage:0,description:"This is Test Coupon",startDate:"2021-12-22T08:54:40.000+05:30",expiryDate:"2021-12-22T08:54:40.000+05:30"},{id:1,code:"EDD77",status:"Active",type:"Amount",amount:5,percentage:0,description:"This is Test Coupon",startDate:"2021-12-22T08:54:40.000+05:30",expiryDate:"2021-12-22T08:54:40.000+05:30"},{id:1,code:"EDD77",status:"Active",type:"Percentage",amount:0,percentage:10,description:"This is Test Coupon",startDate:"2021-12-22T08:54:40.000+05:30",expiryDate:"2021-12-22T08:54:40.000+05:30"},{id:1,code:"EDD77",status:"Active",type:"Amount",amount:5,percentage:0,description:"This is Test Coupon",startDate:"2021-12-22T08:54:40.000+05:30",expiryDate:"2021-12-22T08:54:40.000+05:30"},{id:1,code:"EDD77",status:"notActive",type:"Amount",amount:5,percentage:0,description:"This is Test Coupon",startDate:"2021-12-22T08:54:40.000+05:30",expiryDate:"2021-12-22T08:54:40.000+05:30"}]}onAddCoupon(){const o=this.dialog.open(h.C,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{couponData:{},mode:"ADD"}}).afterClosed().subscribe(n=>{o.unsubscribe()})}onEditCoupon(t){const n=this.dialog.open(h.C,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{couponData:t,mode:"EDIT"}}).afterClosed().subscribe(i=>{n.unsubscribe()})}onActivateCoupon(t){const o=this.dialog.open(c.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("couponsManagement.activateConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),n=o.componentInstance.confirmationEmitter.subscribe(i=>{i?this.activateCoupon(t,o):o.close(),n.unsubscribe()})}activateCoupon(t,o){this.subscriptions.add(this.couponsManagementService.activateCoupon(null==t?void 0:t.id).subscribe(n=>{console.log(n),o.close(),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.activateSuccess"),this.translateService.instant("general.success"))},n=>{var i;this.commonService.handleErrorMessage(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}onDeactivateCoupon(t){const o=this.dialog.open(c.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("couponsManagement.deactivateConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),n=o.componentInstance.confirmationEmitter.subscribe(i=>{i?this.deactivateCoupon(t,o):o.close(),n.unsubscribe()})}deactivateCoupon(t,o){this.subscriptions.add(this.couponsManagementService.deactivateCoupon(null==t?void 0:t.id).subscribe(n=>{console.log(n),o.close(),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.deactivateSuccess"),this.translateService.instant("general.success"))},n=>{var i;this.commonService.handleErrorMessage(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}onDeleteCoupon(t){const o=this.dialog.open(c.S,{disableClose:!0,width:"600px",panelClass:["main-popup"],data:{popupHeading:this.translateService.instant("general.warning"),contentMsg:this.translateService.instant("couponsManagement.deleteConfirmation"),cancelBtnText:this.translateService.instant("general.cancel"),confirmBtnText:this.translateService.instant("general.confirm")}}),n=o.componentInstance.confirmationEmitter.subscribe(i=>{i?this.deleteCoupon(t,o):o.close(),n.unsubscribe()})}deleteCoupon(t,o){this.subscriptions.add(this.couponsManagementService.deleteCoupon(null==t?void 0:t.id).subscribe(n=>{console.log(n),o.close(),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.deleteSuccess"),this.translateService.instant("general.success"))},n=>{var i;this.commonService.handleErrorMessage(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}onPageChanged(t){console.log(null==t?void 0:t.pageIndex)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.sK),e.Y36(b.uw),e.Y36(x.v),e.Y36(l.Z))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-coupons-management"]],decls:23,vars:29,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","pb-4"],[1,"col-lg-6","col-md-6","col-sm-12","title-row"],[1,"title"],[1,"col-lg-6","col-md-6","col-sm-12","button-container"],["mat-raised-button","",1,"btn",3,"click"],[1,"row","filter-row","pb-3"],[1,"col-lg-6","col-md-6","col-sm-12","search-container"],[1,"search-wrapper"],["matPrefix",""],["type","text",3,"placeholder"],[1,"col-lg-6","col-md-6","col-sm-12","filter-container"],["floatLabel","never",1,""],["bindLabel","name","bindValue","id",3,"placeholder","items"],[1,"row","table-row"],[3,"data","columns","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","pageSize","page"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return o.onAddCoupon()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"mat-icon",9),e._uU(14,"search"),e.qZA(),e._UZ(15,"input",10),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"mat-form-field",12),e._UZ(19,"mtx-select",13),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"mtx-grid",15),e.NdJ("page",function(i){return o.onPageChanged(i)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,20,"menu.couponsManagement")),e.xp6(4),e.Oqu(e.lcZ(9,22,"couponsManagement.addCoupon")),e.xp6(7),e.s9C("placeholder",e.lcZ(16,24,"couponsManagement.search")),e.xp6(4),e.s9C("placeholder",e.lcZ(20,26,"couponsManagement.couponStatus")),e.Q6J("items",o.couponStatus),e.xp6(3),e.Q6J("data",o.couponsData)("columns",o.columns)("loading",o.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!0)("showPaginator",!0)("pageSizeOptions",e.DdM(28,A))("pageIndex",0)("pageSize",5))},directives:[y.lW,T.Hw,f.qo,f.KE,D.MS,P.CM],pipes:[v.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary);padding-inline-start:4px}.button-container[_ngcontent-%COMP%]{justify-content:end;text-align:end;padding-inline-end:5%}.button-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:var(--text-primary);color:var(--white-color)}.search-container[_ngcontent-%COMP%]{align-self:center}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:10px 20px;border-radius:30px;border:1px solid #CDCDCD;width:70%;overflow:hidden}@media (max-width: 1024px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{width:100%;padding:8px 10px}}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:14px;box-shadow:none;width:90%}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}.search-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.filter-container[_ngcontent-%COMP%]{justify-content:end;text-align:end}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:1em;justify-content:start;text-align:start}}.filter-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:50%;display:inline-block;padding-right:1em;padding-left:1em}"]}),s})()}];let w=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[m.Bz.forChild(O)],m.Bz]}),s})(),Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[],imports:[[d.ez,w,g.u5,g.UX,C.m8]]}),s})()}}]);