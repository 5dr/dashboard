"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[691],{6691:(x,f,r)=>{r.d(f,{C:()=>Q});var a=r(3679),s=r(8966),A=r(5319),h=r(322),t=r(7716),_=r(69),l=r(690),O=r(7093),P=r(7423),q=r(5245),v=r(7322),E=r(8833),U=r(8583),T=r(9814),M=r(386);function D(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function b(e,u){1&e&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function I(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function L(e,u){if(1&e&&(t.TgZ(0,"mat-form-field"),t.TgZ(1,"p",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",25),t.YNc(5,I,3,3,"mat-error",8),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(2),t.Oqu(t.lcZ(3,2,"couponsManagement.amount")),t.xp6(3),t.Q6J("ngIf",(null==(n=o.getControl("amount"))?null:n.touched)&&(null==(n=o.getControl("amount"))?null:n.invalid))}}function y(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function N(e,u){if(1&e&&(t.TgZ(0,"mat-form-field"),t.TgZ(1,"p",6),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"input",26),t.YNc(5,y,3,3,"mat-error",8),t.qZA()),2&e){const o=t.oxw();let n;t.xp6(2),t.Oqu(t.lcZ(3,2,"couponsManagement.percentage")),t.xp6(3),t.Q6J("ngIf",(null==(n=o.getControl("percentage"))?null:n.touched)&&(null==(n=o.getControl("percentage"))?null:n.invalid))}}function F(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function J(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function k(e,u){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function S(e,u){1&e&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function w(e,u){if(1&e){const o=t.EpF();t.TgZ(0,"mat-dialog-actions"),t.TgZ(1,"div",27),t.TgZ(2,"button",28),t.NdJ("click",function(){return t.CHM(o),t.oxw().onAdd()}),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(2),t.Q6J("disabled",(null==o.couponForm?null:o.couponForm.touched)&&(null==o.couponForm?null:o.couponForm.invalid)||o.loading),t.xp6(2),t.Oqu(t.lcZ(5,2,"couponsManagement.add"))}}function R(e,u){if(1&e){const o=t.EpF();t.TgZ(0,"mat-dialog-actions"),t.TgZ(1,"div",29),t.TgZ(2,"button",30),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSave()}),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t._UZ(6,"span",31),t.TgZ(7,"button",32),t.NdJ("click",function(){return t.CHM(o),t.oxw().onCancel()}),t.TgZ(8,"span"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(2),t.Q6J("disabled",(null==o.couponForm?null:o.couponForm.touched)&&(null==o.couponForm?null:o.couponForm.invalid)||o.loading),t.xp6(2),t.Oqu(t.lcZ(5,3,"couponsManagement.save")),t.xp6(5),t.Oqu(t.lcZ(10,5,"couponsManagement.cancel"))}}let Q=(()=>{class e{constructor(o,n,i,c,p,d){this.data=o,this.dialogRef=n,this.fb=i,this.translateService=c,this.commonService=p,this.couponsManagementService=d,this.loading=!1,this.subscriptions=new A.w}ngOnInit(){this.initCouponForm(),this.handleEditMode()}initCouponForm(){this.couponForm=this.fb.group({code:["",[a.kI.required]],type:["",[a.kI.required]],amount:["",[]],percentage:["",[]],description:["",[a.kI.required]],startDate:["",[a.kI.required]],expiryDate:["",[a.kI.required]],status:["",[a.kI.required]]})}handleEditMode(){var o,n,i,c;"EDIT"===(null===(o=this.data)||void 0===o?void 0:o.mode)&&(this.couponForm.patchValue(null===(n=this.data)||void 0===n?void 0:n.couponData),this.discountType=null===(c=null===(i=this.data)||void 0===i?void 0:i.couponData)||void 0===c?void 0:c.type)}getControl(o){return this.couponForm.get(o)}onSelectType(o){this.discountType=o.value,"amount"===this.discountType?(this.couponForm.controls.amount.setValidators(a.kI.required),this.couponForm.controls.percentage.setValidators([]),this.couponForm.controls.percentage.setValue(null)):(this.couponForm.controls.percentage.setValidators(a.kI.required),this.couponForm.controls.amount.setValidators([]),this.couponForm.controls.amount.setValue(null)),this.couponForm.controls.amount.updateValueAndValidity(),this.couponForm.controls.percentage.updateValueAndValidity()}onAdd(){var o;this.loading=!0,this.subscriptions.add(this.couponsManagementService.addCoupon(null===(o=this.couponForm)||void 0===o?void 0:o.value).subscribe(n=>{this.loading=!1,this.dialogRef.close({added:!0,addedItem:null==n?void 0:n.data}),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.addSuccess"),this.translateService.instant("general.success"))},n=>{var i;this.loading=!1,this.commonService.handleErrorMessage(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}onSave(){var o;this.loading=!0,this.subscriptions.add(this.couponsManagementService.editCoupon(null===(o=this.couponForm)||void 0===o?void 0:o.value).subscribe(n=>{this.loading=!1,this.dialogRef.close({updated:!0,updatedItem:null==n?void 0:n.data}),this.commonService.handleSuccessMessage(this.translateService.instant("couponsManagement.updateSuccess"),this.translateService.instant("general.success"))},n=>{var i;this.loading=!1,this.commonService.handleErrorMessage(null===(i=null==n?void 0:n.error)||void 0===i?void 0:i.message)}))}onCancel(){this.dialogRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.WI),t.Y36(s.so),t.Y36(a.qu),t.Y36(_.sK),t.Y36(l.v),t.Y36(h.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-coupon"]],decls:70,vars:48,consts:[[1,"popup-container"],["mat-dialog-title","",1,"d-flex","align-items-center","head"],["fxFlex",""],["mat-icon-button","","matDialogClose","",1,"mat-close-modal"],[1,"content-wrapper"],[3,"formGroup"],[1,"label"],["matInput","","formControlName","code","type","text"],[4,"ngIf"],[1,"radio-wrapper"],["formControlName","type","name","type","aria-label","type",3,"change"],["value","Amount"],["value","Percentage"],["class","error",4,"ngIf"],["matInput","","formControlName","description","name","","id","","cols","10","rows","5"],["matSuffix","",3,"for"],["type","date"],["startDate",""],["formControlName","startDate","matInput","",3,"mtxDatetimepicker"],["expiryDate",""],["formControlName","expiryDate","matInput","",3,"mtxDatetimepicker"],["formControlName","status","name","status","aria-label","status"],["value","Active"],["value","notActive"],[1,"error"],["matInput","","formControlName","amount","type","number"],["matInput","","formControlName","percentage","type","number"],[1,"d-flex","justify-content-center","w-100","mb-4","confirmation-btns"],["mat-stroked-button","",1,"btn","confirm-btn",3,"disabled","click"],[1,"d-flex","justify-content-center","w-100","mb-4","edit-btns"],["mat-stroked-button","",1,"btn","save-btn",3,"disabled","click"],[1,"mx-2"],["mat-flat-button","",1,"btn","cancel-btn",3,"click"]],template:function(o,n){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"h5"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"span",2),t.TgZ(7,"button",3),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-dialog-content",4),t.TgZ(11,"form",5),t.TgZ(12,"mat-form-field"),t.TgZ(13,"p",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,D,3,3,"mat-error",8),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"p",6),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"mat-radio-group",10),t.NdJ("change",function(c){return n.onSelectType(c)}),t.TgZ(23,"mat-radio-button",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-radio-button",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,b,3,3,"span",13),t.qZA(),t.YNc(30,L,6,4,"mat-form-field",8),t.YNc(31,N,6,4,"mat-form-field",8),t.TgZ(32,"mat-form-field"),t.TgZ(33,"p",6),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"textarea",14),t.YNc(37,F,3,3,"mat-error",8),t.qZA(),t.TgZ(38,"mat-form-field"),t.TgZ(39,"p",6),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"mtx-datetimepicker-toggle",15),t._UZ(43,"mtx-datetimepicker",16,17),t._UZ(45,"input",18),t.YNc(46,J,3,3,"mat-error",8),t.qZA(),t.TgZ(47,"mat-form-field"),t.TgZ(48,"p",6),t._uU(49),t.ALo(50,"translate"),t.qZA(),t._UZ(51,"mtx-datetimepicker-toggle",15),t._UZ(52,"mtx-datetimepicker",16,19),t._UZ(54,"input",20),t.YNc(55,k,3,3,"mat-error",8),t.qZA(),t.TgZ(56,"div",9),t.TgZ(57,"p",6),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-radio-group",21),t.TgZ(61,"mat-radio-button",22),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"mat-radio-button",23),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.qZA(),t.YNc(67,S,3,3,"span",13),t.qZA(),t.qZA(),t.qZA(),t.YNc(68,w,6,4,"mat-dialog-actions",8),t.YNc(69,R,11,7,"mat-dialog-actions",8),t.qZA()),2&o){const i=t.MAs(44),c=t.MAs(53);let p,d,g,C,Z,m;t.xp6(4),t.hij(" ",t.lcZ(5,26,"ADD"===(null==n.data?null:n.data.mode)?"couponsManagement.addCoupon":"couponsManagement.editCoupon")," "),t.xp6(7),t.Q6J("formGroup",n.couponForm),t.xp6(3),t.Oqu(t.lcZ(15,28,"couponsManagement.code")),t.xp6(3),t.Q6J("ngIf",(null==(p=n.getControl("code"))?null:p.touched)&&(null==(p=n.getControl("code"))?null:p.invalid)),t.xp6(3),t.Oqu(t.lcZ(21,30,"couponsManagement.discountType")),t.xp6(4),t.Oqu(t.lcZ(25,32,"couponsManagement.amount")),t.xp6(3),t.Oqu(t.lcZ(28,34,"couponsManagement.percentage")),t.xp6(2),t.Q6J("ngIf",(null==(d=n.getControl("type"))?null:d.touched)&&(null==(d=n.getControl("type"))||null==d.errors?null:d.errors.required)),t.xp6(1),t.Q6J("ngIf","Amount"===n.discountType),t.xp6(1),t.Q6J("ngIf","Percentage"===n.discountType),t.xp6(3),t.Oqu(t.lcZ(35,36,"couponsManagement.description")),t.xp6(3),t.Q6J("ngIf",(null==(g=n.getControl("description"))?null:g.touched)&&(null==(g=n.getControl("description"))?null:g.invalid)),t.xp6(3),t.Oqu(t.lcZ(41,38,"couponsManagement.startDate")),t.xp6(2),t.Q6J("for",i),t.xp6(3),t.Q6J("mtxDatetimepicker",i),t.xp6(1),t.Q6J("ngIf",(null==(C=n.getControl("startDate"))?null:C.touched)&&(null==(C=n.getControl("startDate"))?null:C.invalid)),t.xp6(3),t.Oqu(t.lcZ(50,40,"couponsManagement.expiryDate")),t.xp6(2),t.Q6J("for",c),t.xp6(3),t.Q6J("mtxDatetimepicker",c),t.xp6(1),t.Q6J("ngIf",(null==(Z=n.getControl("expiryDate"))?null:Z.touched)&&(null==(Z=n.getControl("expiryDate"))?null:Z.invalid)),t.xp6(3),t.Oqu(t.lcZ(59,42,"couponsManagement.status")),t.xp6(4),t.Oqu(t.lcZ(63,44,"couponsManagement.active")),t.xp6(3),t.Oqu(t.lcZ(66,46,"couponsManagement.notActive")),t.xp6(2),t.Q6J("ngIf",(null==(m=n.getControl("status"))?null:m.touched)&&(null==(m=n.getControl("status"))||null==m.errors?null:m.errors.required)),t.xp6(1),t.Q6J("ngIf","ADD"===(null==n.data?null:n.data.mode)),t.xp6(1),t.Q6J("ngIf","EDIT"===(null==n.data?null:n.data.mode))}},directives:[s.uh,O.yH,P.lW,s.ZT,q.Hw,s.xY,a._Y,a.JL,a.sg,v.KE,E.Nt,a.Fj,a.JJ,a.u,U.O5,T.VQ,T.U0,M.C7,v.R9,M.VQ,M.WA,v.TO,a.wV,s.H8],pipes:[_.X$],styles:[".head[_ngcontent-%COMP%]{justify-content:center!important}.head[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:0}.mat-close-modal[_ngcontent-%COMP%]{line-height:1em!important}.content-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;display:block;margin-bottom:1em}.content-wrapper[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]{margin-bottom:1em}.content-wrapper[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;width:-moz-fit-content;width:fit-content}.content-wrapper[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:inline-block;margin-inline-start:1em}.content-wrapper[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-inline-end:1em}textarea[_ngcontent-%COMP%]{resize:none}.confirm-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color);width:100%}.edit-btns[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color);width:40%}.edit-btns[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:40%}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),e})()},322:(x,f,r)=>{r.d(f,{Z:()=>h});var a=r(2340),s=r(7716),A=r(1841);let h=(()=>{class t{constructor(l){this.http=l}fetchCouponsList(){return this.http.get(`${a.N.endPointUrl}coupons/coupons-list`)}addCoupon(l){return this.http.post(`${a.N.endPointUrl}coupons/coupons-list`,l)}editCoupon(l){return this.http.put(`${a.N.endPointUrl}coupons/coupons-list`,l)}activateCoupon(l){return this.http.delete(`${a.N.endPointUrl}users/activate/${l}`)}deactivateCoupon(l){return this.http.delete(`${a.N.endPointUrl}coupons/deactivate/${l}`)}deleteCoupon(l){return this.http.delete(`${a.N.endPointUrl}coupons/delete/${l}`)}}return t.\u0275fac=function(l){return new(l||t)(s.LFG(A.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);