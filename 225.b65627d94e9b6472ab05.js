"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[225],{6225:(J,m,i)=>{i.r(m),i.d(m,{StaticPagesModule:()=>I});var f=i(8583),h=i(2340),t=i(7716),C=i(1841);let b=(()=>{class e{constructor(n){this.http=n}fetchStaticPagesList(){return this.http.get(`${h.N.endPointUrl}static-pages/list`)}fetchStaticPage(n){return this.http.get(`${h.N.endPointUrl}static-pages/page/${n}`)}editStaticPage(n){return this.http.post(`${h.N.endPointUrl}static-pages/add`,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(C.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var o=i(3679),d=i(8966),v=i(5319),Z=i(690),u=i(5002),p=i(7460),A=i(7093),x=i(7423),_=i(5245),P=i(7322),y=i(8833);function M(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function T(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"validations.required")," "))}function q(e,r){1&e&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"pushManagement.bodyRequired")," "))}function O(e,r){1&e&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"pushManagement.bodyRequired")," "))}let w=(()=>{class e{constructor(n,a,l,s,c,g){this.data=n,this.dialogRef=a,this.fb=l,this.translateService=s,this.commonService=c,this.staticPageMangService=g,this.toolbar_1=[["bold","italic"],["underline","strike"],["blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],this.toolbar_2=[["bold","italic"],["underline","strike"],["blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]],this.loading=!1,this.subscriptions=new v.w}ngOnInit(){this.initEditor(),this.initPageForm(),this.handleEditMode()}initPageForm(){this.pageForm=this.fb.group({type:["",[o.kI.required]],title_en:["",[o.kI.required]],title_ar:["",[o.kI.required]],body_en:["",[o.kI.required]],body_ar:["",[o.kI.required]]})}initEditor(){this.editor_1=new u.ML,this.editor_2=new u.ML}handleEditMode(){var n;this.pageForm.patchValue(null===(n=this.data)||void 0===n?void 0:n.pageData)}getControl(n){return this.pageForm.get(n)}onSave(){this.subscriptions.add(this.staticPageMangService.editStaticPage(this.pageForm.value).subscribe({next:n=>{this.loading=!1,this.dialogRef.close({updated:!0}),this.commonService.handleSuccessMessage(this.translateService.instant("staticPages.updateSuccess"),this.translateService.instant("general.success"))},error:n=>{this.loading=!1,this.commonService.handleErrorMessage(n.message)}}))}onCancel(){this.dialogRef.close()}ngOnDestroy(){this.editor_1.destroy(),this.editor_2.destroy(),this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(d.so),t.Y36(o.qu),t.Y36(p.sK),t.Y36(Z.v),t.Y36(b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-static-page"]],decls:53,vars:39,consts:[[1,"popup-container"],["mat-dialog-title","",1,"d-flex","align-items-center","head"],["fxFlex",""],["mat-icon-button","","matDialogClose","",1,"mat-close-modal"],[1,"content-wrapper"],[3,"formGroup"],[1,"label"],["matInput","","formControlName","title_en","type","text"],[4,"ngIf"],["matInput","","formControlName","title_ar","type","text"],[1,"editor-container","mb-4"],[1,"editor-wrapper"],[3,"toolbar","editor"],["outputFormat","html","required","","formControlName","body_en",3,"editor","placeholder"],["class","error",4,"ngIf"],["outputFormat","html","required","","formControlName","body_ar",3,"editor","placeholder"],[1,"d-flex","justify-content-center","w-100","mb-4","edit-btns"],["mat-stroked-button","",1,"btn","save-btn",3,"disabled","click"],[1,"mx-2"],["mat-flat-button","",1,"btn","cancel-btn",3,"click"],[1,"error"]],template:function(n,a){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"span",2),t.TgZ(3,"h5"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"span",2),t.TgZ(7,"button",3),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-dialog-content",4),t.TgZ(11,"form",5),t.TgZ(12,"mat-form-field"),t.TgZ(13,"p",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",7),t.YNc(17,M,3,3,"mat-error",8),t.qZA(),t.TgZ(18,"mat-form-field"),t.TgZ(19,"p",6),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.YNc(23,T,3,3,"mat-error",8),t.qZA(),t.TgZ(24,"div",10),t.TgZ(25,"p"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",11),t._UZ(29,"ngx-editor-menu",12),t._UZ(30,"ngx-editor",13),t.ALo(31,"translate"),t.qZA(),t.YNc(32,q,3,3,"span",14),t.qZA(),t.TgZ(33,"div",10),t.TgZ(34,"p"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",11),t._UZ(38,"ngx-editor-menu",12),t._UZ(39,"ngx-editor",15),t.ALo(40,"translate"),t.qZA(),t.YNc(41,O,3,3,"span",14),t.qZA(),t.TgZ(42,"mat-dialog-actions"),t.TgZ(43,"div",16),t.TgZ(44,"button",17),t.NdJ("click",function(){return a.onSave()}),t.TgZ(45,"span"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t._UZ(48,"span",18),t.TgZ(49,"button",19),t.NdJ("click",function(){return a.onCancel()}),t.TgZ(50,"span"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){let l,s,c,g;t.xp6(4),t.hij(" ",t.lcZ(5,21,"staticPages.editPage")," "),t.xp6(7),t.Q6J("formGroup",a.pageForm),t.xp6(3),t.Oqu(t.lcZ(15,23,"staticPages.titleEn")),t.xp6(3),t.Q6J("ngIf",(null==(l=a.getControl("title_en"))?null:l.touched)&&(null==(l=a.getControl("title_en"))?null:l.invalid)),t.xp6(3),t.Oqu(t.lcZ(21,25,"staticPages.titleAr")),t.xp6(3),t.Q6J("ngIf",(null==(s=a.getControl("title_ar"))?null:s.touched)&&(null==(s=a.getControl("title_ar"))?null:s.invalid)),t.xp6(3),t.Oqu(t.lcZ(27,27,"staticPages.contentEn")),t.xp6(3),t.Q6J("toolbar",a.toolbar_1)("editor",a.editor_1),t.xp6(1),t.s9C("placeholder",t.lcZ(31,29,"pushManagement.typeHere")),t.Q6J("editor",a.editor_1),t.xp6(2),t.Q6J("ngIf",(null==(c=a.getControl("body_en"))?null:c.touched)&&(null==(c=a.getControl("body_en"))||null==c.errors?null:c.errors.required)),t.xp6(3),t.Oqu(t.lcZ(36,31,"staticPages.contentAr")),t.xp6(3),t.Q6J("toolbar",a.toolbar_2)("editor",a.editor_2),t.xp6(1),t.s9C("placeholder",t.lcZ(40,33,"pushManagement.typeHere")),t.Q6J("editor",a.editor_2),t.xp6(2),t.Q6J("ngIf",(null==(g=a.getControl("body_ar"))?null:g.touched)&&(null==(g=a.getControl("body_ar"))||null==g.errors?null:g.errors.required)),t.xp6(3),t.Q6J("disabled",a.pageForm.invalid),t.xp6(2),t.Oqu(t.lcZ(47,35,"staticPages.save")),t.xp6(5),t.Oqu(t.lcZ(52,37,"staticPages.cancel"))}},directives:[d.uh,A.yH,x.lW,d.ZT,_.Hw,d.xY,o._Y,o.JL,o.sg,P.KE,y.Nt,o.Fj,o.JJ,o.u,f.O5,u.Mn,u.tP,o.Q7,d.H8,P.TO],pipes:[p.X$],styles:[".head[_ngcontent-%COMP%]{justify-content:center!important}.head[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:0}.mat-close-modal[_ngcontent-%COMP%]{line-height:1em!important}.content-wrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;display:block;margin-bottom:1em}.editor-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block;width:100%;font-weight:bold}.editor-container[_ngcontent-%COMP%]   .editor-wrapper[_ngcontent-%COMP%]{margin-top:1em;background:#f4f4f4}.confirm-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color);width:100%}.edit-btns[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{padding:6px 18px;line-height:1.7em;background-color:var(--text-primary);color:var(--white-color);width:40%}.edit-btns[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{width:40%}  .NgxEditor{height:10em;background:transparent!important;border:none!important;border-top:1px solid rgba(0,0,0,.2)!important}  .NgxEditor__MenuBar{background-color:transparent!important;padding:10px!important}"]}),e})();var U=i(1576);let L=(()=>{class e{constructor(n,a,l,s){this.translateService=n,this.dialog=a,this.commonService=l,this.staticPageManagementService=s,this.subscriptions=new v.w,this.staticPagesData=[],this.loading=!1,this.columns=[{header:this.translateService.instant("staticPages.id"),field:"id",width:"20%"},{header:this.translateService.instant("staticPages.titleAr"),field:"title_ar",width:"20%"},{header:this.translateService.instant("staticPages.titleEn"),field:"title_en",width:"20%"},{header:this.translateService.instant("staticPages.contentAr"),field:"body_ar",width:"20%"},{header:this.translateService.instant("staticPages.contentEn"),field:"body_en",width:"20%"},{header:this.translateService.instant("staticPages.actions"),field:"operation",width:"20%",type:"button",buttons:[{color:"info",type:"icon",icon:"edit",tooltip:this.translateService.instant("staticPages.edit"),click:c=>this.onEditPage(c)}]}]}ngOnInit(){this.fetchStaticPagesList()}fetchStaticPagesList(){this.loading=!0,this.subscriptions.add(this.staticPageManagementService.fetchStaticPagesList().subscribe({next:n=>{1==n.successful&&(this.staticPagesData=n.page,this.loading=!1,console.log(n.page))},error:n=>{this.loading=!1,this.commonService.handleErrorMessage(n.message)}}))}onEditPage(n){const l=this.dialog.open(w,{disableClose:!0,width:"800px",panelClass:["main-popup"],data:{pageData:n}}).afterClosed().subscribe(s=>{l.unsubscribe(),(null==s?void 0:s.updated)&&this.fetchStaticPagesList()})}ngOnDestroy(){this.subscriptions.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p.sK),t.Y36(d.uw),t.Y36(Z.v),t.Y36(b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-static-pages"]],decls:8,vars:15,consts:[[1,"container-fluid","pt-3","pb-4"],[1,"row","pb-4"],[1,"col-lg-6","col-md-6","col-sm-12","title-row"],[1,"title"],[1,"row","table-row"],[3,"data","columns","loading","columnResizable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","columnMovable","expandable","pageOnFront","showPaginator"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"mtx-grid",5),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,13,"menu.staticPages")),t.xp6(3),t.Q6J("data",a.staticPagesData)("columns",a.columns)("loading",a.loading)("columnResizable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!0)("columnMovable",!1)("expandable",!1)("pageOnFront",!0)("showPaginator",!1))},directives:[U.CM],pipes:[p.X$],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#f4f4f4}.title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-inline-start:6px solid var(--text-primary);color:var(--text-primary);padding-inline-start:4px}"]}),e})();var S=i(3423);const E=[{path:"",component:L}];let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[S.Bz.forChild(E)],S.Bz]}),e})();var F=i(4284);let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.ez,k,o.u5,o.UX,F.m8,u.FP.forRoot({locals:{bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"}})]]}),e})()}}]);